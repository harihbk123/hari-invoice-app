"use strict";exports.id=218,exports.ids=[218],exports.modules={65442:(e,t,n)=>{var s=n(17577),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=s.useState,a=s.useEffect,o=s.useLayoutEffect,u=s.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),s=r({inst:{value:n,getSnapshot:t}}),i=s[0].inst,l=s[1];return o(function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})},[e,n,t]),a(function(){return c(i)&&l({inst:i}),e(function(){c(i)&&l({inst:i})})},[e]),u(n),n};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:l},79251:(e,t,n)=>{var s=n(17577),i=n(94095),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,o=s.useRef,u=s.useEffect,c=s.useMemo,l=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,s,i){var d=o(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;var f=a(e,(d=c(function(){function e(e){if(!u){if(u=!0,a=e,e=s(e),void 0!==i&&p.hasValue){var t=p.value;if(i(t,e))return o=t}return o=e}if(t=o,r(a,e))return t;var n=s(e);return void 0!==i&&i(t,n)?(a=e,t):(a=e,o=n)}var a,o,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,s,i]))[0],d[1]);return u(function(){p.hasValue=!0,p.value=f},[f]),l(f),f}},94095:(e,t,n)=>{e.exports=n(65442)},21508:(e,t,n)=>{e.exports=n(79251)},29752:(e,t,n)=>{n.d(t,{Ol:()=>o,SZ:()=>c,Zb:()=>a,aY:()=>l,ll:()=>u});var s=n(10326),i=n(17577),r=n(51223);let a=i.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));a.displayName="Card";let o=i.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let u=i.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));u.displayName="CardTitle";let c=i.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let l=i.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:(0,r.cn)("p-6 pt-0",e),...t}));l.displayName="CardContent",i.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},35048:(e,t,n)=>{n.d(t,{Fg:()=>p,Nb:()=>l,cO:()=>d,ec:()=>f,t2:()=>c});var s=n(44976),i=n(20108),r=n(10119),a=n(76253),o=n(84097),u=n(38880);function c(){let{toast:e}=(0,o.pm)();(0,s.NL)();let t=(0,u.o)(e=>e.setExpenses),n=(0,i.a)({queryKey:["expenses"],queryFn:async()=>{let e=(await (0,a.T4)()).map(e=>({id:e.id,description:e.description||"",amount:e.amount??0,category:e.category||"",category_id:e.category_id||"",category_name:e.category_name||"",date:e.date||"",date_incurred:e.date_incurred||"",payment_method:e.payment_method||"",vendor_name:e.vendor_name||"",receipt_number:e.receipt_number||"",receipt_url:e.receipt_url||"",is_business_expense:e.is_business_expense??!1,is_reimbursable:e.is_reimbursable??!1,tax_deductible:e.tax_deductible??!1,notes:e.notes||"",tags:e.tags||[],status:e.status||"pending",created_at:e.created_at||"",updated_at:e.updated_at||""}));return t(e),e}});return{expenses:n.data??[],isLoading:n.isLoading,error:n.error,refetch:n.refetch}}function l(e){return(0,i.a)({queryKey:["expense",e],queryFn:()=>(0,a.YD)(e),enabled:!!e})}function d(){let{toast:e}=(0,o.pm)(),t=(0,s.NL)(),n=(0,u.o)(e=>e.addExpense);return(0,r.D)({mutationFn:a.Fl,onSuccess:s=>{n({...s,category_id:s.category_id||"",category_name:s.category_name||"",date_incurred:s.date_incurred||"",payment_method:s.payment_method||"",vendor_name:s.vendor_name||"",receipt_number:s.receipt_number||"",is_business_expense:s.is_business_expense??!1,tax_deductible:s.tax_deductible??!1,notes:s.notes||"",tags:s.tags||[],created_at:s.created_at||"",updated_at:s.updated_at||""}),t.invalidateQueries({queryKey:["expenses"]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:"Expense created successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to create expense",variant:"destructive"})}})}function p(){let{toast:e}=(0,o.pm)(),t=(0,s.NL)(),n=(0,u.o)(e=>e.updateExpense);return(0,r.D)({mutationFn:({id:e,data:t})=>(0,a.E)(e,t),onSuccess:s=>{n(s.id,s),t.invalidateQueries({queryKey:["expenses"]}),t.invalidateQueries({queryKey:["expense",s.id]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:"Expense updated successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to update expense",variant:"destructive"})}})}function f(){let{toast:e}=(0,o.pm)(),t=(0,s.NL)(),n=(0,u.o)(e=>e.removeExpense);return(0,r.D)({mutationFn:a.vu,onSuccess:(s,i)=>{n(i),t.invalidateQueries({queryKey:["expenses"]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:"Expense deleted successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to delete expense",variant:"destructive"})}})}},84097:(e,t,n)=>{n.d(t,{pm:()=>p});var s=n(17577);let i=0,r=new Map,a=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?a(n):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},u=[],c={toasts:[]};function l(e){c=o(c,e),u.forEach(e=>{e(c)})}function d({...e}){let t=(i=(i+1)%Number.MAX_VALUE).toString(),n=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,t]=s.useState(c);return s.useEffect(()=>(u.push(t),()=>{let e=u.indexOf(t);e>-1&&u.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},76253:(e,t,n)=>{n.d(t,{E:()=>y,Eb:()=>w,Fl:()=>g,Gw:()=>x,Nu:()=>u,Qu:()=>o,T4:()=>m,VP:()=>b,Wu:()=>p,YD:()=>h,ZL:()=>i,d5:()=>l,eI:()=>a,rk:()=>f,s3:()=>r,sA:()=>c,vu:()=>v});var s=n(2777);async function i(){let{data:e,error:t}=await s.OQ.from("clients").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function r(e){let{data:t,error:n}=await s.OQ.from("clients").select("*").eq("id",e).single();if(n)throw n;return t}async function a(e){let{data:t,error:n}=await s.OQ.from("clients").insert([e]).select().single();if(n)throw n;return t}async function o(e,t){let{data:n,error:i}=await s.OQ.from("clients").update(t).eq("id",e).select().single();if(i)throw i;return n}async function u(e){let{error:t}=await s.OQ.from("clients").delete().eq("id",e);if(t)throw t}async function c(){let{data:e,error:t}=await s.OQ.from("invoices").select(`
      *,
      clients (
        id,
        name,
        email,
        company
      )
    `).order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function l(e){let{data:t,error:n}=await s.OQ.from("invoices").select(`
      *,
      clients (
        id,
        name,
        email,
        company
      )
    `).eq("id",e).single();if(n)throw n;return t}async function d(e,t){let{data:n,error:i}=await s.OQ.from("invoices").update(t).eq("id",e).select().single();if(i)throw i;return n}async function p(e){let{error:t}=await s.OQ.from("invoices").delete().eq("id",e);if(t)throw t}async function f(e,t){return d(e,{status:t})}async function m(){let{data:e,error:t}=await s.OQ.from("expenses").select("*").order("date",{ascending:!1});if(t)throw t;return e||[]}async function h(e){let{data:t,error:n}=await s.OQ.from("expenses").select("*").eq("id",e).single();if(n)throw n;return t}async function g(e){let{data:t,error:n}=await s.OQ.from("expenses").insert([e]).select().single();if(n)throw n;return t}async function y(e,t){let{data:n,error:i}=await s.OQ.from("expenses").update(t).eq("id",e).select().single();if(i)throw i;return n}async function v(e){let{error:t}=await s.OQ.from("expenses").delete().eq("id",e);if(t)throw t}async function x(){let{data:{user:e}}=await s.OQ.auth.getUser();if(!e)return null;let{data:t,error:n}=await s.OQ.from("settings").select("*").eq("user_id",e.id).single();if(n&&"PGRST116"!==n.code)throw n;return t||null}async function b(e){let{data:{user:t}}=await s.OQ.auth.getUser();if(!t)throw Error("User not authenticated");let{data:n,error:i}=await s.OQ.from("settings").upsert({...e,user_id:t.id}).select().single();if(i)throw i;return n}async function w(){try{let[e,t,n]=await Promise.all([s.OQ.from("invoices").select(`
        *,
        clients (
          id,
          name,
          email,
          company
        )
      `),s.OQ.from("clients").select("*"),s.OQ.from("expenses").select("*")]),i=e.data||[],r=t.data||[],a=n.data||[],o=i.filter(e=>"Paid"===e.status).reduce((e,t)=>e+t.amount,0),u=a.reduce((e,t)=>e+t.amount,0),c=function(e){let t=new Map;return e.filter(e=>"Paid"===e.status).forEach(e=>{let n=new Date(e.created_at);n.getFullYear(),(n.getMonth()+1).toString().padStart(2,"0");let s=n.toLocaleDateString("en-US",{year:"numeric",month:"short"});t.set(s,(t.get(s)||0)+e.amount)}),Array.from(t.entries()).map(([e,t])=>({month:e,revenue:t}))}(i),l=function(e){let t=new Map;return e.forEach(e=>{let n=e.category||"Uncategorized";t.set(n,(t.get(n)||0)+e.amount)}),Array.from(t.entries()).map(([e,t])=>({category:e,amount:t}))}(a),d=function(e){let t=new Map;return e.filter(e=>"Paid"===e.status).forEach(e=>{let n=e.clients?.name||"Unknown Client";t.set(n,(t.get(n)||0)+e.amount)}),Array.from(t.entries()).map(([e,t])=>({client:e,revenue:t})).sort((e,t)=>t.revenue-e.revenue).slice(0,10)}(i),p=function(e){let t=new Map;return e.forEach(e=>{let n=e.status||"Unknown";t.set(n,(t.get(n)||0)+1)}),Array.from(t.entries()).map(([e,t])=>({status:e,count:t}))}(i);return{totalRevenue:o,totalExpenses:u,totalClients:r.length,totalInvoices:i.length,monthlyRevenue:c,expensesByCategory:l,clientRevenue:d,invoiceStatusDistribution:p}}catch(e){throw console.error("Error fetching analytics data:",e),e}}},38880:(e,t,n)=>{n.d(t,{o:()=>r});var s=n(60114),i=n(2777);let r=(0,s.Ue)((e,t)=>({user:null,clients:[],invoices:[],expenses:[],expenseCategories:[],settings:null,balanceSummary:null,isLoading:!1,isLoadingClients:!1,isLoadingInvoices:!1,isLoadingExpenses:!1,setUser:t=>e({user:t}),setLoading:t=>e({isLoading:t}),setClients:t=>e({clients:t}),setInvoices:t=>e({invoices:t}),setExpenses:t=>e({expenses:t}),setSettings:t=>e({settings:t}),setBalanceSummary:t=>e({balanceSummary:t}),loadInitialData:async()=>{e({isLoading:!0});try{let[n,s,r,a,o]=await Promise.all([i.TW.getClients(),i.TW.getInvoices(),i.TW.getExpenses(),i.TW.getExpenseCategories(),i.TW.getBalanceSummary()]);n.data&&e({clients:n.data}),s.data&&e({invoices:s.data}),r.data&&e({expenses:r.data}),a.data&&e({expenseCategories:a.data}),o.data&&e({balanceSummary:o.data});let{user:u}=t();if(u){let t=await i.TW.getSettings(u.id);t.data&&e({settings:t.data})}}catch(e){console.error("Error loading initial data:",e)}finally{e({isLoading:!1})}},addClient:t=>e(e=>({clients:[t,...e.clients]})),updateClient:(t,n)=>e(e=>({clients:e.clients.map(e=>e.id===t?{...e,...n}:e)})),removeClient:t=>e(e=>({clients:e.clients.filter(e=>e.id!==t)})),addInvoice:t=>e(e=>({invoices:[t,...e.invoices]})),updateInvoice:(t,n)=>e(e=>({invoices:e.invoices.map(e=>e.id===t?{...e,...n}:e)})),removeInvoice:t=>e(e=>({invoices:e.invoices.filter(e=>e.id!==t)})),addExpense:t=>e(e=>({expenses:[t,...e.expenses]})),updateExpense:(t,n)=>e(e=>({expenses:e.expenses.map(e=>e.id===t?{...e,...n}:e)})),removeExpense:t=>e(e=>({expenses:e.expenses.filter(e=>e.id!==t)})),updateSettings:t=>e(e=>({settings:e.settings?{...e.settings,...t}:null})),updateBalanceSummary:t=>e(e=>({balanceSummary:e.balanceSummary?{...e.balanceSummary,...t}:null})),getTotalEarnings:()=>{let{invoices:e}=t();return e.filter(e=>"Paid"===e.status).reduce((e,t)=>e+t.amount,0)},getTotalExpenses:()=>{let{expenses:e}=t();return e.reduce((e,t)=>e+t.amount,0)},getCurrentBalance:()=>{let{getTotalEarnings:e,getTotalExpenses:n}=t();return e()-n()},getRecentInvoices:(e=5)=>{let{invoices:n}=t();return n.slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,e)},getRecentExpenses:(e=5)=>{let{expenses:n}=t();return n.slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,e)},getOverdueInvoices:()=>{let{invoices:e}=t(),n=new Date;return e.filter(e=>"Pending"===e.status&&new Date(e.due_date)<n)},reset:()=>e({user:null,clients:[],invoices:[],expenses:[],expenseCategories:[],settings:null,balanceSummary:null,isLoading:!1,isLoadingClients:!1,isLoadingInvoices:!1,isLoadingExpenses:!1})}))},10119:(e,t,n)=>{n.d(t,{D:()=>l});var s=n(17577),i=n(71180),r=n(12113),a=n(64351),o=n(3341),u=class extends a.l{#e;#t=void 0;#n;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#r()}mutate(e,t){return this.#s=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){let e=this.#n?.state??(0,i.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){r.Vr.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,n=this.#t.context;e?.type==="success"?(this.#s.onSuccess?.(e.data,t,n),this.#s.onSettled?.(e.data,null,t,n)):e?.type==="error"&&(this.#s.onError?.(e.error,t,n),this.#s.onSettled?.(void 0,e.error,t,n))}this.listeners.forEach(e=>{e(this.#t)})})}},c=n(44976);function l(e,t){let n=(0,c.NL)(t),[i]=s.useState(()=>new u(n,e));s.useEffect(()=>{i.setOptions(e)},[i,e]);let a=s.useSyncExternalStore(s.useCallback(e=>i.subscribe(r.Vr.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),l=s.useCallback((e,t)=>{i.mutate(e,t).catch(o.ZT)},[i]);if(a.error&&(0,o.L3)(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}},60114:(e,t,n)=>{n.d(t,{Ue:()=>p});let s=e=>{let t;let n=new Set,s=(e,s)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=s?s:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,r={setState:s,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(s,i,r);return r},i=e=>e?s(e):s;var r=n(17577),a=n(21508);let{useDebugValue:o}=r,{useSyncExternalStoreWithSelector:u}=a,c=!1,l=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?i(e):e,n=(e,n)=>(function(e,t=l,n){n&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let s=u(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return o(s),s})(t,e,n);return Object.assign(n,t),n},p=e=>e?d(e):d}};