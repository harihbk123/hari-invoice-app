"use strict";exports.id=621,exports.ids=[621],exports.modules={86333:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29752:(e,t,a)=>{a.d(t,{Ol:()=>l,SZ:()=>d,Zb:()=>i,aY:()=>c,ll:()=>o});var r=a(10326),s=a(17577),n=a(51223);let i=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let l=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=s.forwardRef(({className:e,...t},a)=>r.jsx("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},a)=>r.jsx("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},41478:(e,t,a)=>{a.d(t,{xJ:()=>c,lX:()=>f,zG:()=>u});var r=a(10326),s=a(17577),n=a(51223),i=a(45226),l=s.forwardRef((e,t)=>(0,r.jsx)(i.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";let o=(0,a(79360).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...t},a)=>r.jsx(l,{ref:a,className:(0,n.cn)(o(),e),...t}));d.displayName=l.displayName,s.forwardRef(({className:e,...t},a)=>r.jsx("form",{ref:a,className:(0,n.cn)("space-y-6",e),...t})).displayName="Form";let c=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,n.cn)("space-y-2",e),...t}));c.displayName="FormItem";let f=s.forwardRef(({className:e,...t},a)=>r.jsx(d,{ref:a,className:(0,n.cn)("",e),...t}));f.displayName="FormLabel",s.forwardRef(({...e},t)=>r.jsx("div",{ref:t,...e})).displayName="FormControl",s.forwardRef(({className:e,...t},a)=>r.jsx("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...t})).displayName="FormDescription";let u=s.forwardRef(({className:e,children:t,...a},s)=>t?r.jsx("p",{ref:s,className:(0,n.cn)("text-sm font-medium text-destructive",e),...a,children:t}):null);u.displayName="FormMessage"},41190:(e,t,a)=>{a.d(t,{I:()=>i});var r=a(10326),s=a(17577),n=a(51223);let i=s.forwardRef(({className:e,type:t,...a},s)=>r.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));i.displayName="Input"},52667:(e,t,a)=>{a.d(t,{O:()=>c});var r=a(10326),s=a(17577),n=a(91664),i=a(41190),l=a(29752),o=a(41478),d=a(84097);function c({client:e,onSubmit:t,onCancel:a,isLoading:c}){let{toast:f}=(0,d.pm)(),[u,m]=(0,s.useState)({name:e?.name||"",email:e?.email||"",phone:e?.phone||"",company:e?.company||"",address:e?.address||""}),[p,h]=(0,s.useState)({}),x=()=>{let e={};return u.name.trim()||(e.name="Name is required"),u.email.trim()?/\S+@\S+\.\S+/.test(u.email)||(e.email="Invalid email address"):e.email="Email is required",h(e),0===Object.keys(e).length},y=e=>t=>{m(a=>({...a,[e]:t.target.value})),p[e]&&h(t=>({...t,[e]:void 0}))},w=async a=>{if(a.preventDefault(),x())try{await t(u),f({title:"Success",description:e?"Client updated successfully":"Client created successfully"})}catch(e){f({title:"Error",description:"Failed to save client. Please try again.",variant:"destructive"})}};return(0,r.jsxs)(l.Zb,{children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{children:e?"Edit Client":"Create New Client"})}),r.jsx(l.aY,{children:(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)(o.xJ,{children:[r.jsx(o.lX,{children:"Name *"}),r.jsx(i.I,{placeholder:"Enter client name",disabled:c,value:u.name,onChange:y("name")}),r.jsx(o.zG,{children:p.name})]}),(0,r.jsxs)(o.xJ,{children:[r.jsx(o.lX,{children:"Email *"}),r.jsx(i.I,{type:"email",placeholder:"Enter email address",disabled:c,value:u.email,onChange:y("email")}),r.jsx(o.zG,{children:p.email})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)(o.xJ,{children:[r.jsx(o.lX,{children:"Phone"}),r.jsx(i.I,{type:"tel",placeholder:"Enter phone number",disabled:c,value:u.phone,onChange:y("phone")}),r.jsx(o.zG,{children:p.phone})]}),(0,r.jsxs)(o.xJ,{children:[r.jsx(o.lX,{children:"Company"}),r.jsx(i.I,{placeholder:"Enter company name",disabled:c,value:u.company,onChange:y("company")}),r.jsx(o.zG,{children:p.company})]})]}),(0,r.jsxs)(o.xJ,{children:[r.jsx(o.lX,{children:"Address"}),r.jsx(i.I,{placeholder:"Enter full address",disabled:c,value:u.address,onChange:y("address")}),r.jsx(o.zG,{children:p.address})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[a&&r.jsx(n.Button,{type:"button",variant:"outline",onClick:a,disabled:c,children:"Cancel"}),r.jsx(n.Button,{type:"submit",disabled:c,children:c?"Saving...":e?"Update Client":"Create Client"})]})]})})]})}},84097:(e,t,a)=>{a.d(t,{pm:()=>u});var r=a(17577);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function f({...e}){let t=(s=(s+1)%Number.MAX_VALUE).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:f,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},76253:(e,t,a)=>{a.d(t,{E:()=>y,Eb:()=>j,Fl:()=>x,Gw:()=>g,Nu:()=>o,Qu:()=>l,T4:()=>p,VP:()=>v,Wu:()=>u,YD:()=>h,ZL:()=>s,d5:()=>c,eI:()=>i,rk:()=>m,s3:()=>n,sA:()=>d,vu:()=>w});var r=a(2777);async function s(){let{data:e,error:t}=await r.OQ.from("clients").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function n(e){let{data:t,error:a}=await r.OQ.from("clients").select("*").eq("id",e).single();if(a)throw a;return t}async function i(e){let{data:t,error:a}=await r.OQ.from("clients").insert([e]).select().single();if(a)throw a;return t}async function l(e,t){let{data:a,error:s}=await r.OQ.from("clients").update(t).eq("id",e).select().single();if(s)throw s;return a}async function o(e){let{error:t}=await r.OQ.from("clients").delete().eq("id",e);if(t)throw t}async function d(){let{data:e,error:t}=await r.OQ.from("invoices").select(`
      *,
      clients (
        id,
        name,
        email,
        company
      )
    `).order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function c(e){let{data:t,error:a}=await r.OQ.from("invoices").select(`
      *,
      clients (
        id,
        name,
        email,
        company
      )
    `).eq("id",e).single();if(a)throw a;return t}async function f(e,t){let{data:a,error:s}=await r.OQ.from("invoices").update(t).eq("id",e).select().single();if(s)throw s;return a}async function u(e){let{error:t}=await r.OQ.from("invoices").delete().eq("id",e);if(t)throw t}async function m(e,t){return f(e,{status:t})}async function p(){let{data:e,error:t}=await r.OQ.from("expenses").select("*").order("date",{ascending:!1});if(t)throw t;return e||[]}async function h(e){let{data:t,error:a}=await r.OQ.from("expenses").select("*").eq("id",e).single();if(a)throw a;return t}async function x(e){let{data:t,error:a}=await r.OQ.from("expenses").insert([e]).select().single();if(a)throw a;return t}async function y(e,t){let{data:a,error:s}=await r.OQ.from("expenses").update(t).eq("id",e).select().single();if(s)throw s;return a}async function w(e){let{error:t}=await r.OQ.from("expenses").delete().eq("id",e);if(t)throw t}async function g(){let{data:{user:e}}=await r.OQ.auth.getUser();if(!e)return null;let{data:t,error:a}=await r.OQ.from("settings").select("*").eq("user_id",e.id).single();if(a&&"PGRST116"!==a.code)throw a;return t||null}async function v(e){let{data:{user:t}}=await r.OQ.auth.getUser();if(!t)throw Error("User not authenticated");let{data:a,error:s}=await r.OQ.from("settings").upsert({...e,user_id:t.id}).select().single();if(s)throw s;return a}async function j(){try{let[e,t,a]=await Promise.all([r.OQ.from("invoices").select(`
        *,
        clients (
          id,
          name,
          email,
          company
        )
      `),r.OQ.from("clients").select("*"),r.OQ.from("expenses").select("*")]),s=e.data||[],n=t.data||[],i=a.data||[],l=s.filter(e=>"Paid"===e.status).reduce((e,t)=>e+t.amount,0),o=i.reduce((e,t)=>e+t.amount,0),d=function(e){let t=new Map;return e.filter(e=>"Paid"===e.status).forEach(e=>{let a=new Date(e.created_at);a.getFullYear(),(a.getMonth()+1).toString().padStart(2,"0");let r=a.toLocaleDateString("en-US",{year:"numeric",month:"short"});t.set(r,(t.get(r)||0)+e.amount)}),Array.from(t.entries()).map(([e,t])=>({month:e,revenue:t}))}(s),c=function(e){let t=new Map;return e.forEach(e=>{let a=e.category||"Uncategorized";t.set(a,(t.get(a)||0)+e.amount)}),Array.from(t.entries()).map(([e,t])=>({category:e,amount:t}))}(i),f=function(e){let t=new Map;return e.filter(e=>"Paid"===e.status).forEach(e=>{let a=e.clients?.name||"Unknown Client";t.set(a,(t.get(a)||0)+e.amount)}),Array.from(t.entries()).map(([e,t])=>({client:e,revenue:t})).sort((e,t)=>t.revenue-e.revenue).slice(0,10)}(s),u=function(e){let t=new Map;return e.forEach(e=>{let a=e.status||"Unknown";t.set(a,(t.get(a)||0)+1)}),Array.from(t.entries()).map(([e,t])=>({status:e,count:t}))}(s);return{totalRevenue:l,totalExpenses:o,totalClients:n.length,totalInvoices:s.length,monthlyRevenue:d,expensesByCategory:c,clientRevenue:f,invoiceStatusDistribution:u}}catch(e){throw console.error("Error fetching analytics data:",e),e}}},45226:(e,t,a)=>{a.d(t,{WV:()=>l,jH:()=>o});var r=a(17577),s=a(60962),n=a(34214),i=a(10326),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,n.Z8)(`Primitive.${t}`),s=r.forwardRef((e,r)=>{let{asChild:s,...n}=e,l=s?a:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(l,{...n,ref:r})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function o(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}}};