"use strict";exports.id=386,exports.ids=[386],exports.modules={38443:(e,t,a)=>{a.d(t,{C:()=>o});var n=a(10326);a(17577);var r=a(79360),s=a(51223);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-500/80",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-500/80",draft:"border-transparent bg-gray-500 text-white hover:bg-gray-500/80",pending:"border-transparent bg-blue-500 text-white hover:bg-blue-500/80",paid:"border-transparent bg-green-500 text-white hover:bg-green-500/80",overdue:"border-transparent bg-red-500 text-white hover:bg-red-500/80",cancelled:"border-transparent bg-gray-400 text-white hover:bg-gray-400/80"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...a}){return n.jsx("div",{className:(0,s.cn)(i({variant:t}),e),...a})}},41156:(e,t,a)=>{a.d(t,{RM:()=>l,SC:()=>c,iA:()=>i,pj:()=>u,ss:()=>d,xD:()=>o});var n=a(10326),r=a(17577),s=a(51223);let i=r.forwardRef(({className:e,...t},a)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:a,className:(0,s.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let o=r.forwardRef(({className:e,...t},a)=>n.jsx("thead",{ref:a,className:(0,s.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let l=r.forwardRef(({className:e,...t},a)=>n.jsx("tbody",{ref:a,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",r.forwardRef(({className:e,...t},a)=>n.jsx("tfoot",{ref:a,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let c=r.forwardRef(({className:e,...t},a)=>n.jsx("tr",{ref:a,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));c.displayName="TableRow";let d=r.forwardRef(({className:e,...t},a)=>n.jsx("th",{ref:a,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableHead";let u=r.forwardRef(({className:e,...t},a)=>n.jsx("td",{ref:a,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",r.forwardRef(({className:e,...t},a)=>n.jsx("caption",{ref:a,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},84097:(e,t,a)=>{a.d(t,{pm:()=>f});var n=a(17577);let r=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u({...e}){let t=(r=(r+1)%Number.MAX_VALUE).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function f(){let[e,t]=n.useState(c);return n.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},76253:(e,t,a)=>{a.d(t,{E:()=>y,Eb:()=>v,Fl:()=>w,Gw:()=>h,Nu:()=>l,Qu:()=>o,T4:()=>g,VP:()=>x,Wu:()=>f,YD:()=>p,ZL:()=>r,d5:()=>d,eI:()=>i,rk:()=>m,s3:()=>s,sA:()=>c,vu:()=>b});var n=a(2777);async function r(){let{data:e,error:t}=await n.OQ.from("clients").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function s(e){let{data:t,error:a}=await n.OQ.from("clients").select("*").eq("id",e).single();if(a)throw a;return t}async function i(e){let{data:t,error:a}=await n.OQ.from("clients").insert([e]).select().single();if(a)throw a;return t}async function o(e,t){let{data:a,error:r}=await n.OQ.from("clients").update(t).eq("id",e).select().single();if(r)throw r;return a}async function l(e){let{error:t}=await n.OQ.from("clients").delete().eq("id",e);if(t)throw t}async function c(){let{data:e,error:t}=await n.OQ.from("invoices").select(`
      *,
      clients (
        id,
        name,
        email,
        company
      )
    `).order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function d(e){let{data:t,error:a}=await n.OQ.from("invoices").select(`
      *,
      clients (
        id,
        name,
        email,
        company
      )
    `).eq("id",e).single();if(a)throw a;return t}async function u(e,t){let{data:a,error:r}=await n.OQ.from("invoices").update(t).eq("id",e).select().single();if(r)throw r;return a}async function f(e){let{error:t}=await n.OQ.from("invoices").delete().eq("id",e);if(t)throw t}async function m(e,t){return u(e,{status:t})}async function g(){let{data:e,error:t}=await n.OQ.from("expenses").select("*").order("date",{ascending:!1});if(t)throw t;return e||[]}async function p(e){let{data:t,error:a}=await n.OQ.from("expenses").select("*").eq("id",e).single();if(a)throw a;return t}async function w(e){let{data:t,error:a}=await n.OQ.from("expenses").insert([e]).select().single();if(a)throw a;return t}async function y(e,t){let{data:a,error:r}=await n.OQ.from("expenses").update(t).eq("id",e).select().single();if(r)throw r;return a}async function b(e){let{error:t}=await n.OQ.from("expenses").delete().eq("id",e);if(t)throw t}async function h(){let{data:{user:e}}=await n.OQ.auth.getUser();if(!e)return null;let{data:t,error:a}=await n.OQ.from("settings").select("*").eq("user_id",e.id).single();if(a&&"PGRST116"!==a.code)throw a;return t||null}async function x(e){let{data:{user:t}}=await n.OQ.auth.getUser();if(!t)throw Error("User not authenticated");let{data:a,error:r}=await n.OQ.from("settings").upsert({...e,user_id:t.id}).select().single();if(r)throw r;return a}async function v(){try{let[e,t,a]=await Promise.all([n.OQ.from("invoices").select(`
        *,
        clients (
          id,
          name,
          email,
          company
        )
      `),n.OQ.from("clients").select("*"),n.OQ.from("expenses").select("*")]),r=e.data||[],s=t.data||[],i=a.data||[],o=r.filter(e=>"Paid"===e.status).reduce((e,t)=>e+t.amount,0),l=i.reduce((e,t)=>e+t.amount,0),c=function(e){let t=new Map;return e.filter(e=>"Paid"===e.status).forEach(e=>{let a=new Date(e.created_at);a.getFullYear(),(a.getMonth()+1).toString().padStart(2,"0");let n=a.toLocaleDateString("en-US",{year:"numeric",month:"short"});t.set(n,(t.get(n)||0)+e.amount)}),Array.from(t.entries()).map(([e,t])=>({month:e,revenue:t}))}(r),d=function(e){let t=new Map;return e.forEach(e=>{let a=e.category||"Uncategorized";t.set(a,(t.get(a)||0)+e.amount)}),Array.from(t.entries()).map(([e,t])=>({category:e,amount:t}))}(i),u=function(e){let t=new Map;return e.filter(e=>"Paid"===e.status).forEach(e=>{let a=e.clients?.name||"Unknown Client";t.set(a,(t.get(a)||0)+e.amount)}),Array.from(t.entries()).map(([e,t])=>({client:e,revenue:t})).sort((e,t)=>t.revenue-e.revenue).slice(0,10)}(r),f=function(e){let t=new Map;return e.forEach(e=>{let a=e.status||"Unknown";t.set(a,(t.get(a)||0)+1)}),Array.from(t.entries()).map(([e,t])=>({status:e,count:t}))}(r);return{totalRevenue:o,totalExpenses:l,totalClients:s.length,totalInvoices:r.length,monthlyRevenue:c,expensesByCategory:d,clientRevenue:u,invoiceStatusDistribution:f}}catch(e){throw console.error("Error fetching analytics data:",e),e}}},38880:(e,t,a)=>{a.d(t,{o:()=>s});var n=a(60114),r=a(2777);let s=(0,n.Ue)((e,t)=>({user:null,clients:[],invoices:[],expenses:[],expenseCategories:[],settings:null,balanceSummary:null,isLoading:!1,isLoadingClients:!1,isLoadingInvoices:!1,isLoadingExpenses:!1,setUser:t=>e({user:t}),setLoading:t=>e({isLoading:t}),setClients:t=>e({clients:t}),setInvoices:t=>e({invoices:t}),setExpenses:t=>e({expenses:t}),setSettings:t=>e({settings:t}),setBalanceSummary:t=>e({balanceSummary:t}),loadInitialData:async()=>{e({isLoading:!0});try{let[a,n,s,i,o]=await Promise.all([r.TW.getClients(),r.TW.getInvoices(),r.TW.getExpenses(),r.TW.getExpenseCategories(),r.TW.getBalanceSummary()]);a.data&&e({clients:a.data}),n.data&&e({invoices:n.data}),s.data&&e({expenses:s.data}),i.data&&e({expenseCategories:i.data}),o.data&&e({balanceSummary:o.data});let{user:l}=t();if(l){let t=await r.TW.getSettings(l.id);t.data&&e({settings:t.data})}}catch(e){console.error("Error loading initial data:",e)}finally{e({isLoading:!1})}},addClient:t=>e(e=>({clients:[t,...e.clients]})),updateClient:(t,a)=>e(e=>({clients:e.clients.map(e=>e.id===t?{...e,...a}:e)})),removeClient:t=>e(e=>({clients:e.clients.filter(e=>e.id!==t)})),addInvoice:t=>e(e=>({invoices:[t,...e.invoices]})),updateInvoice:(t,a)=>e(e=>({invoices:e.invoices.map(e=>e.id===t?{...e,...a}:e)})),removeInvoice:t=>e(e=>({invoices:e.invoices.filter(e=>e.id!==t)})),addExpense:t=>e(e=>({expenses:[t,...e.expenses]})),updateExpense:(t,a)=>e(e=>({expenses:e.expenses.map(e=>e.id===t?{...e,...a}:e)})),removeExpense:t=>e(e=>({expenses:e.expenses.filter(e=>e.id!==t)})),updateSettings:t=>e(e=>({settings:e.settings?{...e.settings,...t}:null})),updateBalanceSummary:t=>e(e=>({balanceSummary:e.balanceSummary?{...e.balanceSummary,...t}:null})),getTotalEarnings:()=>{let{invoices:e}=t();return e.filter(e=>"Paid"===e.status).reduce((e,t)=>e+t.amount,0)},getTotalExpenses:()=>{let{expenses:e}=t();return e.reduce((e,t)=>e+t.amount,0)},getCurrentBalance:()=>{let{getTotalEarnings:e,getTotalExpenses:a}=t();return e()-a()},getRecentInvoices:(e=5)=>{let{invoices:a}=t();return a.slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,e)},getRecentExpenses:(e=5)=>{let{expenses:a}=t();return a.slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,e)},getOverdueInvoices:()=>{let{invoices:e}=t(),a=new Date;return e.filter(e=>"Pending"===e.status&&new Date(e.due_date)<a)},reset:()=>e({user:null,clients:[],invoices:[],expenses:[],expenseCategories:[],settings:null,balanceSummary:null,isLoading:!1,isLoadingClients:!1,isLoadingInvoices:!1,isLoadingExpenses:!1})}))}};