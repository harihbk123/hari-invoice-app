"use strict";exports.id=854,exports.ids=[854],exports.modules={29280:(e,t,a)=>{a.d(t,{Bw:()=>x,Ph:()=>c,Ql:()=>h,i4:()=>m,ki:()=>u});var i=a(10326),n=a(17577),s=a(48863),o=a(941),r=a(96633),l=a(32933),d=a(51223);let c=s.fC;s.ZA;let u=s.B4,m=n.forwardRef(({className:e,children:t,...a},n)=>(0,i.jsxs)(s.xz,{ref:n,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,i.jsx(s.JO,{asChild:!0,children:i.jsx(o.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=s.xz.displayName;let p=n.forwardRef(({className:e,...t},a)=>i.jsx(s.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(r.Z,{className:"h-4 w-4"})}));p.displayName=s.u_.displayName;let f=n.forwardRef(({className:e,...t},a)=>i.jsx(s.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(o.Z,{className:"h-4 w-4"})}));f.displayName=s.$G.displayName;let x=n.forwardRef(({className:e,children:t,position:a="popper",...n},o)=>i.jsx(s.h_,{children:(0,i.jsxs)(s.VY,{ref:o,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...n,children:[i.jsx(p,{}),i.jsx(s.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(f,{})]})}));x.displayName=s.VY.displayName,n.forwardRef(({className:e,...t},a)=>i.jsx(s.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=s.__.displayName;let h=n.forwardRef(({className:e,children:t,...a},n)=>(0,i.jsxs)(s.ck,{ref:n,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(s.wU,{children:i.jsx(l.Z,{className:"h-4 w-4"})})}),i.jsx(s.eT,{children:t})]}));h.displayName=s.ck.displayName,n.forwardRef(({className:e,...t},a)=>i.jsx(s.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=s.Z0.displayName},39843:(e,t,a)=>{a.d(t,{GE:()=>m,h8:()=>c,qx:()=>d,sJ:()=>u});var i=a(44976),n=a(20108),s=a(10119),o=a(76253),r=a(84097),l=a(38880);function d(){let{toast:e}=(0,r.pm)();(0,i.NL)();let t=(0,l.o)(e=>e.setInvoices),a=(0,n.a)({queryKey:["invoices"],queryFn:async()=>{let e=(await (0,o.sA)()).map(e=>({id:e.id,invoice_number:e.invoice_number||"",client_id:e.client_id||"",amount:e.amount??0,status:e.status||"Draft",issue_date:e.issue_date||"",due_date:e.due_date||"",description:e.description||"",subtotal:e.subtotal??0,tax:e.tax??0,items:e.items||[],client:e.client||void 0,client_name:e.client_name||"",client_email:e.client_email||"",client_phone:e.client_phone||"",client_address:e.client_address||"",client_company:e.client_company||"",created_at:e.created_at||"",updated_at:e.updated_at||""})).map(e=>({...e,client_id:e.client_id||null,client_name:e.client_name||"",amount:e.amount??0,subtotal:e.subtotal??0,tax:e.tax??0,date_issued:e.issue_date||"",due_date:e.due_date||"",status:e.status||null,items:e.items||[],created_at:e.created_at||null,updated_at:e.updated_at||null}));return t(e),e}});return{invoices:a.data??[],isLoading:a.isLoading,error:a.error,refetch:a.refetch}}function c(e){return(0,n.a)({queryKey:["invoice",e],queryFn:()=>(0,o.d5)(e),enabled:!!e})}function u(){let{toast:e}=(0,r.pm)(),t=(0,i.NL)(),a=(0,l.o)(e=>e.removeInvoice);return(0,s.D)({mutationFn:o.Wu,onSuccess:(i,n)=>{a(n),t.invalidateQueries({queryKey:["invoices"]}),t.invalidateQueries({queryKey:["clients"]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:"Invoice deleted successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to delete invoice",variant:"destructive"})}})}function m(){let{toast:e}=(0,r.pm)(),t=(0,i.NL)();return(0,s.D)({mutationFn:({id:e,status:t})=>(0,o.rk)(e,t),onSuccess:a=>{t.invalidateQueries({queryKey:["invoices"]}),t.invalidateQueries({queryKey:["invoice",a.id]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:`Invoice status changed to ${a.status}`})},onError:t=>{e({title:"Error",description:t.message||"Failed to change invoice status",variant:"destructive"})}})}},30831:(e,t,a)=>{a.d(t,{D:()=>s});var i=a(87296);a(77725);var n=a(51223);function s(e,t,a){let s=new i.ZP({unit:"pt",format:"a4",putOnlyUsedFonts:!0});s.setFont("helvetica"),s.setFontSize(24),s.setFont("helvetica","bold"),s.text("INVOICE",40,60),s.setFontSize(10),s.setFont("helvetica","normal"),s.text(`Invoice: ${e.id}`,400,40),s.text(`Date: ${(0,n.p6)(e.issue_date)}`,400,55),s.text(`Due: ${(0,n.p6)(e.due_date)}`,400,70),s.setFontSize(12),s.setFont("helvetica","bold"),s.text("FROM:",40,100);let o=120;s.setFontSize(10),s.setFont("helvetica","normal"),s.text(a.profile_name||"Your Company",40,o),o+=15,a.profile_address&&(s.setFontSize(9),s.splitTextToSize(a.profile_address,200).forEach(e=>{s.text(e,40,o),o+=12})),s.setFontSize(9),a.profile_gstin&&(s.text(`GSTIN: ${a.profile_gstin}`,40,o),o+=12),a.profile_phone&&(s.text(`Phone: ${a.profile_phone}`,40,o),o+=12),a.profile_email&&(s.text(`Email: ${a.profile_email}`,40,o),o+=12),s.setFontSize(12),s.setFont("helvetica","bold"),s.text("BILLED TO:",320,100);let r=120;s.setFontSize(10),s.setFont("helvetica","normal"),s.text(t.name,320,r),r+=15,t.address&&(s.setFontSize(9),s.splitTextToSize(t.address,200).forEach(e=>{s.text(e,320,r),r+=12})),t.email&&(s.text(`Email: ${t.email}`,320,r),r+=12),t.phone&&(s.text(`Phone: ${t.phone}`,320,r),r+=12);let l=Math.max(o,r)+30,d=(e.items??[]).map(e=>{let t=parseFloat(e.rate?.toString()||"0"),a=parseFloat(e.amount?.toString()||"0"),i=parseInt(e.quantity?.toString()||"1");return[e.description||"",i.toString(),`INR ${t.toFixed(2)}`,`INR ${a.toFixed(2)}`]});s.autoTable({head:[["Description","Qty","Unit Cost","Amount"]],body:d,startY:l,styles:{fontSize:9,cellPadding:6,overflow:"linebreak"},headStyles:{fillColor:[52,73,94],textColor:[255,255,255],fontSize:10,fontStyle:"bold"},columnStyles:{0:{cellWidth:250,halign:"left"},1:{cellWidth:50,halign:"center"},2:{cellWidth:90,halign:"right"},3:{cellWidth:90,halign:"right"}},margin:{left:40,right:40}});let c=s.lastAutoTable.finalY+30;s.setFont("helvetica","normal"),s.setFontSize(10);let u=parseFloat(e.subtotal?.toString()||"0"),m=parseFloat(e.tax?.toString()||"0"),p=parseFloat(e.amount?.toString()||"0"),f=parseFloat(a.tax_rate?.toString()||"0");s.text("Subtotal:",380,c),s.text(`INR ${u.toFixed(2)}`,520,c,{align:"right"}),s.text(`Tax (${f}%):`,380,c+20),s.text(`INR ${m.toFixed(2)}`,520,c+20,{align:"right"}),s.setFont("helvetica","bold"),s.text("TOTAL:",380,c+55),s.text(`INR ${p.toFixed(2)}`,520,c+55,{align:"right"});let x=c+80;s.setFont("helvetica","bold"),s.setFontSize(11),s.text("BANK ACCOUNT DETAILS",40,x),s.setFont("helvetica","normal"),s.setFontSize(9);let h=x+20;s.text("Account Name:",40,h),s.text(a.bank_account_name||a.profile_name||"Your Name",150,h),h+=15,s.text("Account Type:",40,h),s.text(a.account_type||"Current Account",150,h),h+=15,s.text("Account Number:",40,h),s.text(a.bank_account||"",150,h),h+=15,s.text("Bank Name:",40,h),s.text(a.bank_name||"",150,h),h+=15,s.text("Branch Name:",40,h),s.text(a.bank_branch||"",150,h),h+=15,s.text("IFSC Code:",40,h),s.text(a.bank_ifsc||"",150,h),h+=15,s.text("SWIFT Code:",40,h),s.text(a.bank_swift||"",150,h),s.setFontSize(8),s.setFont("helvetica","italic"),s.text("Thank you for your business!",40,750);let y=e.id.replace(/[^a-zA-Z0-9-_]/g,"_");s.save(`Invoice_${y}.pdf`)}},60343:(e,t,a)=>{a.d(t,{Q:()=>c,r:()=>d});var i=a(20108),n=a(44976),s=a(10119),o=a(76253),r=a(84097),l=a(38880);function d(){let e=(0,l.o)(e=>e.setSettings),t=(0,i.a)({queryKey:["settings"],queryFn:async()=>{let t=await (0,o.Gw)();return t&&e(t),t}});return{settings:t.data,isLoading:t.isLoading,error:t.error,refetch:t.refetch}}function c(){let{toast:e}=(0,r.pm)(),t=(0,n.NL)(),a=(0,l.o)(e=>e.setSettings);return(0,s.D)({mutationFn:o.VP,onSuccess:i=>{i&&a(i),t.invalidateQueries({queryKey:["settings"]}),e({title:"Success",description:"Settings updated successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to update settings",variant:"destructive"})}})}}};