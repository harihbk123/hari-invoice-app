"use strict";exports.id=711,exports.ids=[711],exports.modules={29752:(e,t,s)=>{s.d(t,{Ol:()=>d,SZ:()=>o,Zb:()=>i,aY:()=>c,ll:()=>l});var a=s(10326),r=s(17577),n=s(51223);let i=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let d=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let l=r.forwardRef(({className:e,...t},s)=>a.jsx("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let o=r.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let c=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},59008:(e,t,s)=>{s.d(t,{xJ:()=>o,lX:()=>c,zG:()=>u});var a=s(10326),r=s(17577),n=s(51223),i=s(34478);let d=(0,s(79360).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=r.forwardRef(({className:e,...t},s)=>a.jsx(i.f,{ref:s,className:(0,n.cn)(d(),e),...t}));l.displayName=i.f.displayName,r.forwardRef(({className:e,...t},s)=>a.jsx("form",{ref:s,className:(0,n.cn)("space-y-6",e),...t})).displayName="Form";let o=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("space-y-2",e),...t}));o.displayName="FormItem";let c=r.forwardRef(({className:e,...t},s)=>a.jsx(l,{ref:s,className:(0,n.cn)("",e),...t}));c.displayName="FormLabel",r.forwardRef(({...e},t)=>a.jsx("div",{ref:t,...e})).displayName="FormControl",r.forwardRef(({className:e,...t},s)=>a.jsx("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t})).displayName="FormDescription";let u=r.forwardRef(({className:e,children:t,...s},r)=>t?a.jsx("p",{ref:r,className:(0,n.cn)("text-sm font-medium text-destructive",e),...s,children:t}):null);u.displayName="FormMessage"},41190:(e,t,s)=>{s.d(t,{I:()=>i});var a=s(10326),r=s(17577),n=s(51223);let i=r.forwardRef(({className:e,type:t,...s},r)=>a.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));i.displayName="Input"},74929:(e,t,s)=>{s.d(t,{V:()=>c});var a=s(10326),r=s(17577),n=s(29752),i=s(91664),d=s(41190),l=s(59008),o=s(84097);function c({expense:e,onSubmit:t,onCancel:s,isLoading:c}){let{toast:u}=(0,o.pm)(),[p,m]=(0,r.useState)([]),[x,f]=(0,r.useState)(!0),[g,y]=(0,r.useState)({description:e?.description||"",amount:e?.amount||0,category:e?.category||"",date:e?.date||new Date().toISOString().split("T")[0],payment_method:e?.payment_method||"Cash",is_reimbursable:e?.is_reimbursable||!1}),[b,h]=(0,r.useState)({}),v=()=>{let e={};return g.description.trim()||(e.description="Description is required"),(!g.amount||g.amount<=0)&&(e.amount="Amount must be greater than 0"),g.category||(e.category="Category is required"),g.date||(e.date="Date is required"),h(e),0===Object.keys(e).length},_=e=>t=>{let s=t.target.value;"amount"===e?s=parseFloat(t.target.value)||0:"is_reimbursable"===e&&(s=t.target.checked),y(t=>({...t,[e]:s})),b[e]&&h(t=>{let s={...t};return delete s[e],s})},j=async e=>{if(e.preventDefault(),v())try{await t(g)}catch(e){u({title:"Error",description:"Failed to save expense. Please try again.",variant:"destructive"})}};return x?a.jsx("div",{className:"p-8 text-center",children:"Loading categories..."}):(0,a.jsxs)(n.Zb,{children:[a.jsx(n.Ol,{children:a.jsx(n.ll,{children:e?"Edit Expense":"Create New Expense"})}),a.jsx(n.aY,{children:(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)(l.xJ,{children:[a.jsx(l.lX,{children:"Description *"}),a.jsx(d.I,{value:g.description,onChange:_("description"),placeholder:"What was this expense for?",disabled:c}),a.jsx(l.zG,{children:b.description})]}),(0,a.jsxs)(l.xJ,{children:[a.jsx(l.lX,{children:"Amount *"}),a.jsx(d.I,{type:"number",step:"0.01",value:g.amount,onChange:_("amount"),placeholder:"0.00",disabled:c}),a.jsx(l.zG,{children:b.amount})]}),(0,a.jsxs)(l.xJ,{children:[a.jsx(l.lX,{children:"Category *"}),(0,a.jsxs)("select",{value:g.category,onChange:_("category"),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:c,children:[a.jsx("option",{value:"",children:"Select a category"}),p.map(e=>a.jsx("option",{value:e.name,children:e.name},e.id))]}),a.jsx(l.zG,{children:b.category})]}),(0,a.jsxs)(l.xJ,{children:[a.jsx(l.lX,{children:"Date *"}),a.jsx(d.I,{type:"date",value:g.date,onChange:_("date"),disabled:c}),a.jsx(l.zG,{children:b.date})]}),(0,a.jsxs)(l.xJ,{children:[a.jsx(l.lX,{children:"Payment Method"}),(0,a.jsxs)("select",{value:g.payment_method,onChange:_("payment_method"),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:c,children:[a.jsx("option",{value:"Cash",children:"Cash"}),a.jsx("option",{value:"Credit Card",children:"Credit Card"}),a.jsx("option",{value:"Debit Card",children:"Debit Card"}),a.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),a.jsx("option",{value:"Check",children:"Check"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsx(l.xJ,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"is_reimbursable",checked:g.is_reimbursable,onChange:_("is_reimbursable"),disabled:c,className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),a.jsx(l.lX,{htmlFor:"is_reimbursable",className:"text-sm font-medium",children:"This is a reimbursable expense"})]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[s&&a.jsx(i.Button,{type:"button",variant:"outline",onClick:s,disabled:c,children:"Cancel"}),a.jsx(i.Button,{type:"submit",disabled:c,children:c?e?"Updating...":"Creating...":e?"Update Expense":"Create Expense"})]})]})})]})}s(2777)},35048:(e,t,s)=>{s.d(t,{Fg:()=>p,Nb:()=>c,cO:()=>u,ec:()=>m,t2:()=>o});var a=s(44976),r=s(48083),n=s(28468),i=s(76253),d=s(84097),l=s(38880);function o(){let{toast:e}=(0,d.pm)();(0,a.NL)();let t=(0,l.o)(e=>e.setExpenses),s=(0,r.a)({queryKey:["expenses"],queryFn:async()=>{let e=(await (0,i.T4)()).map(e=>({id:e.id,description:e.description||"",amount:e.amount??0,category:e.category||"",category_id:e.category_id||"",category_name:e.category_name||"",date:e.date||"",date_incurred:e.date_incurred||"",payment_method:e.payment_method||"",vendor_name:e.vendor_name||"",receipt_number:e.receipt_number||"",receipt_url:e.receipt_url||"",is_business_expense:e.is_business_expense??!1,is_reimbursable:e.is_reimbursable??!1,tax_deductible:e.tax_deductible??!1,notes:e.notes||"",tags:e.tags||[],status:e.status||"pending",created_at:e.created_at||"",updated_at:e.updated_at||""}));return t(e),e}});return{expenses:s.data??[],isLoading:s.isLoading,error:s.error,refetch:s.refetch}}function c(e){return(0,r.a)({queryKey:["expense",e],queryFn:()=>(0,i.YD)(e),enabled:!!e})}function u(){let{toast:e}=(0,d.pm)(),t=(0,a.NL)(),s=(0,l.o)(e=>e.addExpense);return(0,n.D)({mutationFn:i.Fl,onSuccess:a=>{s({...a,category_id:a.category_id||"",category_name:a.category_name||"",date_incurred:a.date_incurred||"",payment_method:a.payment_method||"",vendor_name:a.vendor_name||"",receipt_number:a.receipt_number||"",is_business_expense:a.is_business_expense??!1,tax_deductible:a.tax_deductible??!1,notes:a.notes||"",tags:a.tags||[],created_at:a.created_at||"",updated_at:a.updated_at||""}),t.invalidateQueries({queryKey:["expenses"]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:"Expense created successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to create expense",variant:"destructive"})}})}function p(){let{toast:e}=(0,d.pm)(),t=(0,a.NL)(),s=(0,l.o)(e=>e.updateExpense);return(0,n.D)({mutationFn:({id:e,data:t})=>(0,i.E)(e,t),onSuccess:a=>{s(a.id,a),t.invalidateQueries({queryKey:["expenses"]}),t.invalidateQueries({queryKey:["expense",a.id]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:"Expense updated successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to update expense",variant:"destructive"})}})}function m(){let{toast:e}=(0,d.pm)(),t=(0,a.NL)(),s=(0,l.o)(e=>e.removeExpense);return(0,n.D)({mutationFn:i.vu,onSuccess:(a,r)=>{s(r),t.invalidateQueries({queryKey:["expenses"]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:"Expense deleted successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to delete expense",variant:"destructive"})}})}},84097:(e,t,s)=>{s.d(t,{pm:()=>p});var a=s(17577);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],o={toasts:[]};function c(e){o=d(o,e),l.forEach(e=>{e(o)})}function u({...e}){let t=(r=(r+1)%Number.MAX_VALUE).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,t]=a.useState(o);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},38880:(e,t,s)=>{s.d(t,{o:()=>n});var a=s(60114),r=s(2777);let n=(0,a.Ue)((e,t)=>({user:null,clients:[],invoices:[],expenses:[],expenseCategories:[],settings:null,balanceSummary:null,isLoading:!1,isLoadingClients:!1,isLoadingInvoices:!1,isLoadingExpenses:!1,setUser:t=>e({user:t}),setLoading:t=>e({isLoading:t}),setClients:t=>e({clients:t}),setInvoices:t=>e({invoices:t}),setExpenses:t=>e({expenses:t}),setSettings:t=>e({settings:t}),setBalanceSummary:t=>e({balanceSummary:t}),loadInitialData:async()=>{e({isLoading:!0});try{let[s,a,n,i,d]=await Promise.all([r.TW.getClients(),r.TW.getInvoices(),r.TW.getExpenses(),r.TW.getExpenseCategories(),r.TW.getBalanceSummary()]);s.data&&e({clients:s.data}),a.data&&e({invoices:a.data}),n.data&&e({expenses:n.data}),i.data&&e({expenseCategories:i.data}),d.data&&e({balanceSummary:d.data});let{user:l}=t();if(l){let t=await r.TW.getSettings(l.id);t.data&&e({settings:t.data})}}catch(e){console.error("Error loading initial data:",e)}finally{e({isLoading:!1})}},addClient:t=>e(e=>({clients:[t,...e.clients]})),updateClient:(t,s)=>e(e=>({clients:e.clients.map(e=>e.id===t?{...e,...s}:e)})),removeClient:t=>e(e=>({clients:e.clients.filter(e=>e.id!==t)})),addInvoice:t=>e(e=>({invoices:[t,...e.invoices]})),updateInvoice:(t,s)=>e(e=>({invoices:e.invoices.map(e=>e.id===t?{...e,...s}:e)})),removeInvoice:t=>e(e=>({invoices:e.invoices.filter(e=>e.id!==t)})),addExpense:t=>e(e=>({expenses:[t,...e.expenses]})),updateExpense:(t,s)=>e(e=>({expenses:e.expenses.map(e=>e.id===t?{...e,...s}:e)})),removeExpense:t=>e(e=>({expenses:e.expenses.filter(e=>e.id!==t)})),updateSettings:t=>e(e=>({settings:e.settings?{...e.settings,...t}:null})),updateBalanceSummary:t=>e(e=>({balanceSummary:e.balanceSummary?{...e.balanceSummary,...t}:null})),getTotalEarnings:()=>{let{invoices:e}=t();return e.filter(e=>"Paid"===e.status).reduce((e,t)=>e+t.amount,0)},getTotalExpenses:()=>{let{expenses:e}=t();return e.reduce((e,t)=>e+t.amount,0)},getCurrentBalance:()=>{let{getTotalEarnings:e,getTotalExpenses:s}=t();return e()-s()},getRecentInvoices:(e=5)=>{let{invoices:s}=t();return s.slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,e)},getRecentExpenses:(e=5)=>{let{expenses:s}=t();return s.slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,e)},getOverdueInvoices:()=>{let{invoices:e}=t(),s=new Date;return e.filter(e=>"Pending"===e.status&&new Date(e.due_date)<s)},reset:()=>e({user:null,clients:[],invoices:[],expenses:[],expenseCategories:[],settings:null,balanceSummary:null,isLoading:!1,isLoadingClients:!1,isLoadingInvoices:!1,isLoadingExpenses:!1})}))}};