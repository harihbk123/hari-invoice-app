"use strict";exports.id=203,exports.ids=[203],exports.modules={38443:(e,t,a)=>{a.d(t,{C:()=>o});var s=a(10326);a(17577);var n=a(79360),i=a(51223);let r=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-500/80",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-500/80",draft:"border-transparent bg-gray-500 text-white hover:bg-gray-500/80",pending:"border-transparent bg-blue-500 text-white hover:bg-blue-500/80",paid:"border-transparent bg-green-500 text-white hover:bg-green-500/80",overdue:"border-transparent bg-red-500 text-white hover:bg-red-500/80",cancelled:"border-transparent bg-gray-400 text-white hover:bg-gray-400/80"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...a}){return s.jsx("div",{className:(0,i.cn)(r({variant:t}),e),...a})}},29280:(e,t,a)=>{a.d(t,{Bw:()=>g,Ph:()=>c,Ql:()=>x,i4:()=>m,ki:()=>u});var s=a(10326),n=a(17577),i=a(48863),r=a(941),o=a(96633),l=a(32933),d=a(51223);let c=i.fC;i.ZA;let u=i.B4,m=n.forwardRef(({className:e,children:t,...a},n)=>(0,s.jsxs)(i.xz,{ref:n,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,s.jsx(i.JO,{asChild:!0,children:s.jsx(r.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=i.xz.displayName;let p=n.forwardRef(({className:e,...t},a)=>s.jsx(i.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(o.Z,{className:"h-4 w-4"})}));p.displayName=i.u_.displayName;let f=n.forwardRef(({className:e,...t},a)=>s.jsx(i.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(r.Z,{className:"h-4 w-4"})}));f.displayName=i.$G.displayName;let g=n.forwardRef(({className:e,children:t,position:a="popper",...n},r)=>s.jsx(i.h_,{children:(0,s.jsxs)(i.VY,{ref:r,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...n,children:[s.jsx(p,{}),s.jsx(i.l_,{className:(0,d.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(f,{})]})}));g.displayName=i.VY.displayName,n.forwardRef(({className:e,...t},a)=>s.jsx(i.__,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=i.__.displayName;let x=n.forwardRef(({className:e,children:t,...a},n)=>(0,s.jsxs)(i.ck,{ref:n,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(i.wU,{children:s.jsx(l.Z,{className:"h-4 w-4"})})}),s.jsx(i.eT,{children:t})]}));x.displayName=i.ck.displayName,n.forwardRef(({className:e,...t},a)=>s.jsx(i.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=i.Z0.displayName},41156:(e,t,a)=>{a.d(t,{RM:()=>l,SC:()=>d,iA:()=>r,pj:()=>u,ss:()=>c,xD:()=>o});var s=a(10326),n=a(17577),i=a(51223);let r=n.forwardRef(({className:e,...t},a)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:a,className:(0,i.cn)("w-full caption-bottom text-sm",e),...t})}));r.displayName="Table";let o=n.forwardRef(({className:e,...t},a)=>s.jsx("thead",{ref:a,className:(0,i.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let l=n.forwardRef(({className:e,...t},a)=>s.jsx("tbody",{ref:a,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",n.forwardRef(({className:e,...t},a)=>s.jsx("tfoot",{ref:a,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=n.forwardRef(({className:e,...t},a)=>s.jsx("tr",{ref:a,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=n.forwardRef(({className:e,...t},a)=>s.jsx("th",{ref:a,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let u=n.forwardRef(({className:e,...t},a)=>s.jsx("td",{ref:a,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",n.forwardRef(({className:e,...t},a)=>s.jsx("caption",{ref:a,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},39843:(e,t,a)=>{a.d(t,{GE:()=>m,h8:()=>c,qx:()=>d,sJ:()=>u});var s=a(44976),n=a(48083),i=a(28468),r=a(76253),o=a(84097),l=a(38880);function d(){let{toast:e}=(0,o.pm)();(0,s.NL)();let t=(0,l.o)(e=>e.setInvoices),a=(0,n.a)({queryKey:["invoices"],queryFn:async()=>{let e=(await (0,r.sA)()).map(e=>({id:e.id,invoice_number:e.invoice_number||"",client_id:e.client_id||"",amount:e.amount??0,status:e.status||"Draft",issue_date:e.issue_date||"",due_date:e.due_date||"",description:e.description||"",subtotal:e.subtotal??0,tax:e.tax??0,items:e.items||[],client:e.client||void 0,client_name:e.client_name||"",client_email:e.client_email||"",client_phone:e.client_phone||"",client_address:e.client_address||"",client_company:e.client_company||"",created_at:e.created_at||"",updated_at:e.updated_at||""})).map(e=>({...e,client_id:e.client_id||null,client_name:e.client_name||"",amount:e.amount??0,subtotal:e.subtotal??0,tax:e.tax??0,date_issued:e.issue_date||"",due_date:e.due_date||"",status:e.status||null,items:e.items||[],created_at:e.created_at||null,updated_at:e.updated_at||null}));return t(e),e}});return{invoices:a.data??[],isLoading:a.isLoading,error:a.error,refetch:a.refetch}}function c(e){return(0,n.a)({queryKey:["invoice",e],queryFn:()=>(0,r.d5)(e),enabled:!!e})}function u(){let{toast:e}=(0,o.pm)(),t=(0,s.NL)(),a=(0,l.o)(e=>e.removeInvoice);return(0,i.D)({mutationFn:r.Wu,onSuccess:(s,n)=>{a(n),t.invalidateQueries({queryKey:["invoices"]}),t.invalidateQueries({queryKey:["clients"]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:"Invoice deleted successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to delete invoice",variant:"destructive"})}})}function m(){let{toast:e}=(0,o.pm)(),t=(0,s.NL)();return(0,i.D)({mutationFn:({id:e,status:t})=>(0,r.rk)(e,t),onSuccess:a=>{t.invalidateQueries({queryKey:["invoices"]}),t.invalidateQueries({queryKey:["invoice",a.id]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:`Invoice status changed to ${a.status}`})},onError:t=>{e({title:"Error",description:t.message||"Failed to change invoice status",variant:"destructive"})}})}},30831:(e,t,a)=>{a.d(t,{D:()=>i});var s=a(87296);a(77725);var n=a(51223);function i(e,t,a){let i=new s.ZP({unit:"pt",format:"a4",putOnlyUsedFonts:!0});i.setFont("helvetica"),i.setFontSize(24),i.setFont("helvetica","bold"),i.text("INVOICE",40,60),i.setFontSize(10),i.setFont("helvetica","normal"),i.text(`Invoice: ${e.id}`,400,40),i.text(`Date: ${(0,n.p6)(e.issue_date)}`,400,55),i.text(`Due: ${(0,n.p6)(e.due_date)}`,400,70),i.setFontSize(12),i.setFont("helvetica","bold"),i.text("FROM:",40,100);let r=120;i.setFontSize(10),i.setFont("helvetica","normal"),i.text(a.profile_name||"Your Company",40,r),r+=15,a.profile_address&&(i.setFontSize(9),i.splitTextToSize(a.profile_address,200).forEach(e=>{i.text(e,40,r),r+=12})),i.setFontSize(9),a.profile_gstin&&(i.text(`GSTIN: ${a.profile_gstin}`,40,r),r+=12),a.profile_phone&&(i.text(`Phone: ${a.profile_phone}`,40,r),r+=12),a.profile_email&&(i.text(`Email: ${a.profile_email}`,40,r),r+=12),i.setFontSize(12),i.setFont("helvetica","bold"),i.text("BILLED TO:",320,100);let o=120;i.setFontSize(10),i.setFont("helvetica","normal"),i.text(t.name,320,o),o+=15,t.address&&(i.setFontSize(9),i.splitTextToSize(t.address,200).forEach(e=>{i.text(e,320,o),o+=12})),t.email&&(i.text(`Email: ${t.email}`,320,o),o+=12),t.phone&&(i.text(`Phone: ${t.phone}`,320,o),o+=12);let l=Math.max(r,o)+30,d=(e.items??[]).map(e=>{let t=parseFloat(e.rate?.toString()||"0"),a=parseFloat(e.amount?.toString()||"0"),s=parseInt(e.quantity?.toString()||"1");return[e.description||"",s.toString(),`INR ${t.toFixed(2)}`,`INR ${a.toFixed(2)}`]});i.autoTable({head:[["Description","Qty","Unit Cost","Amount"]],body:d,startY:l,styles:{fontSize:9,cellPadding:6,overflow:"linebreak"},headStyles:{fillColor:[52,73,94],textColor:[255,255,255],fontSize:10,fontStyle:"bold"},columnStyles:{0:{cellWidth:250,halign:"left"},1:{cellWidth:50,halign:"center"},2:{cellWidth:90,halign:"right"},3:{cellWidth:90,halign:"right"}},margin:{left:40,right:40}});let c=i.lastAutoTable.finalY+30;i.setFont("helvetica","normal"),i.setFontSize(10);let u=parseFloat(e.subtotal?.toString()||"0"),m=parseFloat(e.tax?.toString()||"0"),p=parseFloat(e.amount?.toString()||"0"),f=parseFloat(a.tax_rate?.toString()||"0");i.text("Subtotal:",380,c),i.text(`INR ${u.toFixed(2)}`,520,c,{align:"right"}),i.text(`Tax (${f}%):`,380,c+20),i.text(`INR ${m.toFixed(2)}`,520,c+20,{align:"right"}),i.setFont("helvetica","bold"),i.text("TOTAL:",380,c+55),i.text(`INR ${p.toFixed(2)}`,520,c+55,{align:"right"});let g=c+80;i.setFont("helvetica","bold"),i.setFontSize(11),i.text("BANK ACCOUNT DETAILS",40,g),i.setFont("helvetica","normal"),i.setFontSize(9);let x=g+20;i.text("Account Name:",40,x),i.text(a.bank_account_name||a.profile_name||"Your Name",150,x),x+=15,i.text("Account Type:",40,x),i.text(a.account_type||"Current Account",150,x),x+=15,i.text("Account Number:",40,x),i.text(a.bank_account||"",150,x),x+=15,i.text("Bank Name:",40,x),i.text(a.bank_name||"",150,x),x+=15,i.text("Branch Name:",40,x),i.text(a.bank_branch||"",150,x),x+=15,i.text("IFSC Code:",40,x),i.text(a.bank_ifsc||"",150,x),x+=15,i.text("SWIFT Code:",40,x),i.text(a.bank_swift||"",150,x),i.setFontSize(8),i.setFont("helvetica","italic"),i.text("Thank you for your business!",40,750);let h=e.id.replace(/[^a-zA-Z0-9-_]/g,"_");i.save(`Invoice_${h}.pdf`)}},60343:(e,t,a)=>{a.d(t,{Q:()=>c,r:()=>d});var s=a(48083),n=a(44976),i=a(28468),r=a(76253),o=a(84097),l=a(38880);function d(){let e=(0,l.o)(e=>e.setSettings),t=(0,s.a)({queryKey:["settings"],queryFn:async()=>{let t=await (0,r.Gw)();return t&&e(t),t}});return{settings:t.data,isLoading:t.isLoading,error:t.error,refetch:t.refetch}}function c(){let{toast:e}=(0,o.pm)(),t=(0,n.NL)(),a=(0,l.o)(e=>e.setSettings);return(0,i.D)({mutationFn:r.VP,onSuccess:s=>{s&&a(s),t.invalidateQueries({queryKey:["settings"]}),e({title:"Success",description:"Settings updated successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to update settings",variant:"destructive"})}})}},84097:(e,t,a)=>{a.d(t,{pm:()=>m});var s=a(17577);let n=0,i=new Map,r=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?r(a):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u({...e}){let t=(n=(n+1)%Number.MAX_VALUE).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=s.useState(d);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},38880:(e,t,a)=>{a.d(t,{o:()=>i});var s=a(60114),n=a(2777);let i=(0,s.Ue)((e,t)=>({user:null,clients:[],invoices:[],expenses:[],expenseCategories:[],settings:null,balanceSummary:null,isLoading:!1,isLoadingClients:!1,isLoadingInvoices:!1,isLoadingExpenses:!1,setUser:t=>e({user:t}),setLoading:t=>e({isLoading:t}),setClients:t=>e({clients:t}),setInvoices:t=>e({invoices:t}),setExpenses:t=>e({expenses:t}),setSettings:t=>e({settings:t}),setBalanceSummary:t=>e({balanceSummary:t}),loadInitialData:async()=>{e({isLoading:!0});try{let[a,s,i,r,o]=await Promise.all([n.TW.getClients(),n.TW.getInvoices(),n.TW.getExpenses(),n.TW.getExpenseCategories(),n.TW.getBalanceSummary()]);a.data&&e({clients:a.data}),s.data&&e({invoices:s.data}),i.data&&e({expenses:i.data}),r.data&&e({expenseCategories:r.data}),o.data&&e({balanceSummary:o.data});let{user:l}=t();if(l){let t=await n.TW.getSettings(l.id);t.data&&e({settings:t.data})}}catch(e){console.error("Error loading initial data:",e)}finally{e({isLoading:!1})}},addClient:t=>e(e=>({clients:[t,...e.clients]})),updateClient:(t,a)=>e(e=>({clients:e.clients.map(e=>e.id===t?{...e,...a}:e)})),removeClient:t=>e(e=>({clients:e.clients.filter(e=>e.id!==t)})),addInvoice:t=>e(e=>({invoices:[t,...e.invoices]})),updateInvoice:(t,a)=>e(e=>({invoices:e.invoices.map(e=>e.id===t?{...e,...a}:e)})),removeInvoice:t=>e(e=>({invoices:e.invoices.filter(e=>e.id!==t)})),addExpense:t=>e(e=>({expenses:[t,...e.expenses]})),updateExpense:(t,a)=>e(e=>({expenses:e.expenses.map(e=>e.id===t?{...e,...a}:e)})),removeExpense:t=>e(e=>({expenses:e.expenses.filter(e=>e.id!==t)})),updateSettings:t=>e(e=>({settings:e.settings?{...e.settings,...t}:null})),updateBalanceSummary:t=>e(e=>({balanceSummary:e.balanceSummary?{...e.balanceSummary,...t}:null})),getTotalEarnings:()=>{let{invoices:e}=t();return e.filter(e=>"Paid"===e.status).reduce((e,t)=>e+t.amount,0)},getTotalExpenses:()=>{let{expenses:e}=t();return e.reduce((e,t)=>e+t.amount,0)},getCurrentBalance:()=>{let{getTotalEarnings:e,getTotalExpenses:a}=t();return e()-a()},getRecentInvoices:(e=5)=>{let{invoices:a}=t();return a.slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,e)},getRecentExpenses:(e=5)=>{let{expenses:a}=t();return a.slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,e)},getOverdueInvoices:()=>{let{invoices:e}=t(),a=new Date;return e.filter(e=>"Pending"===e.status&&new Date(e.due_date)<a)},reset:()=>e({user:null,clients:[],invoices:[],expenses:[],expenseCategories:[],settings:null,balanceSummary:null,isLoading:!1,isLoadingClients:!1,isLoadingInvoices:!1,isLoadingExpenses:!1})}))}};