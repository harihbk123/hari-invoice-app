(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{25282:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=25282,e.exports=t},65092:function(e,t,n){Promise.resolve().then(n.bind(n,14547))},14547:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var s=n(57437),r=n(2265),a=n(79820),i=n(12381),l=n(17168),c=n(15291),d=n(11713),o=n(47625),u=n(21156),f=n(56940),m=n(97059),x=n(62994),h=n(8147),p=n(22190),j=n(54061),g=n(75169),y=n(3574),v=n(20407),N=n(77031),w=n(31699),b=n(72990),C=n(92735),O=n(70525),Z=n(95252),_=n(71621),E=n(48736),k=n(95805),Q=n(93448),R=n(96629);function S(){var e;let[t,n]=(0,r.useState)("6months"),[S,U]=(0,r.useState)("overview"),{data:q,isLoading:Y}=(0,d.a)({queryKey:["analytics"],queryFn:()=>(0,R.Eb)()});if(Y)return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)("div",{className:"text-muted-foreground",children:"Loading analytics..."})});if(!q)return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(b.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Data Available"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Start creating invoices and expenses to see analytics."})]})});let{totalRevenue:P=0,totalExpenses:F=0,totalClients:B=0,totalInvoices:T=0,monthlyRevenue:D=[],expensesByCategory:A=[],clientRevenue:G=[],invoiceStatusDistribution:I=[]}=q,K=P-F,L=P>0?K/P*100:0,M=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Insights into your business performance and financial trends"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(c.Ph,{value:t,onValueChange:n,children:[(0,s.jsx)(c.i4,{className:"w-[180px]",children:(0,s.jsx)(c.ki,{placeholder:"Select period"})}),(0,s.jsxs)(c.Bw,{children:[(0,s.jsx)(c.Ql,{value:"1month",children:"Last Month"}),(0,s.jsx)(c.Ql,{value:"3months",children:"Last 3 Months"}),(0,s.jsx)(c.Ql,{value:"6months",children:"Last 6 Months"}),(0,s.jsx)(c.Ql,{value:"1year",children:"Last Year"})]})]}),(0,s.jsxs)(i.Button,{variant:"outline",children:[(0,s.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,s.jsx)(a.Zb,{children:(0,s.jsx)(a.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:(0,Q.xG)(P)}),(0,s.jsxs)("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(0,s.jsx)(O.Z,{className:"h-3 w-3 mr-1"}),"+12% from last period"]})]}),(0,s.jsx)(Z.Z,{className:"h-8 w-8 text-green-600"})]})})}),(0,s.jsx)(a.Zb,{children:(0,s.jsx)(a.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Expenses"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:(0,Q.xG)(F)}),(0,s.jsxs)("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[(0,s.jsx)(O.Z,{className:"h-3 w-3 mr-1"}),"+5% from last period"]})]}),(0,s.jsx)(_.Z,{className:"h-8 w-8 text-red-600"})]})})}),(0,s.jsx)(a.Zb,{children:(0,s.jsx)(a.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Net Profit"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:(0,Q.xG)(K)}),(0,s.jsxs)("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(0,s.jsx)(O.Z,{className:"h-3 w-3 mr-1"}),"+15% from last period"]})]}),(0,s.jsx)(O.Z,{className:"h-8 w-8 text-blue-600"})]})})}),(0,s.jsx)(a.Zb,{children:(0,s.jsx)(a.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Profit Margin"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:[L.toFixed(1),"%"]}),(0,s.jsxs)("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[(0,s.jsx)(O.Z,{className:"h-3 w-3 mr-1"}),"+2% from last period"]})]}),(0,s.jsx)(b.Z,{className:"h-8 w-8 text-purple-600"})]})})})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsx)(a.Zb,{children:(0,s.jsx)(a.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(E.Z,{className:"h-5 w-5 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Total Invoices"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:T})]})]})})}),(0,s.jsx)(a.Zb,{children:(0,s.jsx)(a.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(k.Z,{className:"h-5 w-5 text-green-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Total Clients"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:B})]})]})})}),(0,s.jsx)(a.Zb,{children:(0,s.jsx)(a.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(_.Z,{className:"h-5 w-5 text-orange-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Expense Categories"}),(0,s.jsx)("p",{className:"text-xl font-bold",children:A.length})]})]})})})]}),(0,s.jsxs)(l.mQ,{value:S,onValueChange:U,children:[(0,s.jsxs)(l.dr,{children:[(0,s.jsx)(l.SP,{value:"overview",children:"Overview"}),(0,s.jsx)(l.SP,{value:"revenue",children:"Revenue"}),(0,s.jsx)(l.SP,{value:"expenses",children:"Expenses"}),(0,s.jsx)(l.SP,{value:"clients",children:"Clients"})]}),(0,s.jsx)(l.nU,{value:"overview",className:"space-y-6",children:(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.Ol,{children:(0,s.jsx)(a.ll,{children:"Monthly Revenue Trend"})}),(0,s.jsx)(a.aY,{children:(0,s.jsx)(o.h,{width:"100%",height:300,children:(0,s.jsxs)(u.w,{data:D,children:[(0,s.jsx)(f.q,{strokeDasharray:"3 3"}),(0,s.jsx)(m.K,{dataKey:"month"}),(0,s.jsx)(x.B,{}),(0,s.jsx)(h.u,{formatter:e=>(0,Q.xG)(Number(e))}),(0,s.jsx)(p.D,{}),(0,s.jsx)(j.x,{type:"monotone",dataKey:"revenue",stroke:"#0088FE",strokeWidth:2})]})})})]}),(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.Ol,{children:(0,s.jsx)(a.ll,{children:"Invoice Status Distribution"})}),(0,s.jsx)(a.aY,{children:(0,s.jsx)(o.h,{width:"100%",height:300,children:(0,s.jsxs)(g.u,{children:[(0,s.jsx)(y.b,{data:I,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:n}=e;return"".concat(t," ").concat((100*n).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"count",children:I.map((e,t)=>(0,s.jsx)(v.b,{fill:M[t%M.length]},"cell-".concat(t)))}),(0,s.jsx)(h.u,{})]})})})]})]})}),(0,s.jsx)(l.nU,{value:"revenue",className:"space-y-6",children:(0,s.jsx)("div",{className:"grid gap-6",children:(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.Ol,{children:(0,s.jsx)(a.ll,{children:"Top Clients by Revenue"})}),(0,s.jsx)(a.aY,{children:(0,s.jsx)(o.h,{width:"100%",height:300,children:(0,s.jsxs)(N.v,{data:G.slice(0,10),children:[(0,s.jsx)(f.q,{strokeDasharray:"3 3"}),(0,s.jsx)(m.K,{dataKey:"client"}),(0,s.jsx)(x.B,{}),(0,s.jsx)(h.u,{formatter:e=>(0,Q.xG)(Number(e))}),(0,s.jsx)(w.$,{dataKey:"revenue",fill:"#00C49F"})]})})})]})})}),(0,s.jsx)(l.nU,{value:"expenses",className:"space-y-6",children:(0,s.jsx)("div",{className:"grid gap-6",children:(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.Ol,{children:(0,s.jsx)(a.ll,{children:"Expenses by Category"})}),(0,s.jsx)(a.aY,{children:(0,s.jsx)(o.h,{width:"100%",height:300,children:(0,s.jsxs)(N.v,{data:A,children:[(0,s.jsx)(f.q,{strokeDasharray:"3 3"}),(0,s.jsx)(m.K,{dataKey:"category"}),(0,s.jsx)(x.B,{}),(0,s.jsx)(h.u,{formatter:e=>(0,Q.xG)(Number(e))}),(0,s.jsx)(w.$,{dataKey:"amount",fill:"#FF8042"})]})})})]})})}),(0,s.jsx)(l.nU,{value:"clients",className:"space-y-6",children:(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.Ol,{children:(0,s.jsx)(a.ll,{children:"Client Revenue Distribution"})}),(0,s.jsx)(a.aY,{children:(0,s.jsx)(o.h,{width:"100%",height:300,children:(0,s.jsxs)(g.u,{children:[(0,s.jsx)(y.b,{data:G.slice(0,8),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{client:t,percent:n}=e;return"".concat(t," ").concat((100*n).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"revenue",children:G.slice(0,8).map((e,t)=>(0,s.jsx)(v.b,{fill:M[t%M.length]},"cell-".concat(t)))}),(0,s.jsx)(h.u,{formatter:e=>(0,Q.xG)(Number(e))})]})})})]}),(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.Ol,{children:(0,s.jsx)(a.ll,{children:"Client Statistics"})}),(0,s.jsxs)(a.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Clients"}),(0,s.jsx)("span",{className:"font-semibold",children:B})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Active Clients"}),(0,s.jsx)("span",{className:"font-semibold",children:Math.min(B,Math.floor(.8*B))})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Avg Revenue per Client"}),(0,s.jsx)("span",{className:"font-semibold",children:(0,Q.xG)(B>0?P/B:0)})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Top Client Revenue"}),(0,s.jsx)("span",{className:"font-semibold",children:(0,Q.xG)(G.length>0&&(null===(e=G[0])||void 0===e?void 0:e.revenue)||0)})]})]})]})]})})]})]})}},12381:function(e,t,n){"use strict";n.d(t,{Button:function(){return d}});var s=n(57437),r=n(2265),a=n(37053),i=n(90535),l=n(93448);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:n,variant:r,size:i,asChild:d=!1,...o}=e,u=d?a.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(c({variant:r,size:i,className:n})),ref:t,...o})});d.displayName="Button"},79820:function(e,t,n){"use strict";n.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return c}});var s=n(57437),r=n(2265),a=n(93448);let i=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",n),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",n),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",n),...r})});o.displayName="CardContent",r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",n),...r})}).displayName="CardFooter"},15291:function(e,t,n){"use strict";n.d(t,{Bw:function(){return h},Ph:function(){return o},Ql:function(){return p},i4:function(){return f},ki:function(){return u}});var s=n(57437),r=n(2265),a=n(60520),i=n(40875),l=n(22135),c=n(30401),d=n(93448);let o=a.fC;a.ZA;let u=a.B4,f=r.forwardRef((e,t)=>{let{className:n,children:r,...l}=e;return(0,s.jsxs)(a.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...l,children:[r,(0,s.jsx)(a.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=a.xz.displayName;let m=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",n),...r,children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=a.u_.displayName;let x=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",n),...r,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=a.$G.displayName;let h=r.forwardRef((e,t)=>{let{className:n,children:r,position:i="popper",...l}=e;return(0,s.jsx)(a.h_,{children:(0,s.jsxs)(a.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:i,...l,children:[(0,s.jsx)(m,{}),(0,s.jsx)(a.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(x,{})]})})});h.displayName=a.VY.displayName,r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...r})}).displayName=a.__.displayName;let p=r.forwardRef((e,t)=>{let{className:n,children:r,...i}=e;return(0,s.jsxs)(a.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(a.wU,{children:(0,s.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(a.eT,{children:r})]})});p.displayName=a.ck.displayName,r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",n),...r})}).displayName=a.Z0.displayName},17168:function(e,t,n){"use strict";n.d(t,{SP:function(){return d},dr:function(){return c},mQ:function(){return l},nU:function(){return o}});var s=n(57437),r=n(2265),a=n(49707),i=n(93448);let l=a.fC,c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...r})});c.displayName=a.aV.displayName;let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...r})});d.displayName=a.xz.displayName;let o=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...r})});o.displayName=a.VY.displayName},5526:function(e,t,n){"use strict";n.d(t,{OQ:function(){return a},TW:function(){return l},zB:function(){return i}});var s=n(21388),r=n(40257);let a=(0,s.createBrowserClient)(r.env.NEXT_PUBLIC_SUPABASE_URL,r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY),i=async(e,t)=>{let{data:n,error:s}=await a.auth.signInWithPassword({email:e,password:t});return{data:n,error:s}},l={async getClients(){let{data:e,error:t}=await a.from("clients").select("*").order("created_at",{ascending:!1});return{data:e,error:t}},async createClient(e){let{data:t,error:n}=await a.from("clients").insert([e]).select().single();return{data:t,error:n}},async updateClient(e,t){let{data:n,error:s}=await a.from("clients").update(t).eq("id",e).select().single();return{data:n,error:s}},async deleteClient(e){let{error:t}=await a.from("clients").delete().eq("id",e);return{error:t}},async getInvoices(){let{data:e,error:t}=await a.from("invoices").select("*, clients(*)").order("created_at",{ascending:!1});return{data:e,error:t}},async createInvoice(e){let{data:t,error:n}=await a.from("invoices").insert([e]).select().single();return{data:t,error:n}},async updateInvoice(e,t){let{data:n,error:s}=await a.from("invoices").update(t).eq("id",e).select().single();return{data:n,error:s}},async deleteInvoice(e){let{error:t}=await a.from("invoices").delete().eq("id",e);return{error:t}},async getExpenses(){let{data:e,error:t}=await a.from("expenses").select("*").order("date",{ascending:!1});return{data:e,error:t}},async createExpense(e){let{data:t,error:n}=await a.from("expenses").insert([e]).select().single();return{data:t,error:n}},async updateExpense(e,t){let{data:n,error:s}=await a.from("expenses").update(t).eq("id",e).select().single();return{data:n,error:s}},async deleteExpense(e){let{error:t}=await a.from("expenses").delete().eq("id",e);return{error:t}},async getExpenseCategories(){let{data:e,error:t}=await a.from("expense_categories").select("*").order("name");return{data:e,error:t}},async getSettings(e){let{data:t,error:n}=await a.from("settings").select("*").eq("user_id",e).single();return{data:t,error:n}},async updateSettings(e){let{data:t,error:n}=await a.from("settings").upsert(e).select().single();return{data:t,error:n}},async getBalanceSummary(){let{data:e,error:t}=await a.from("balance_summary").select("*").single();return{data:e,error:t}}}},96629:function(e,t,n){"use strict";n.d(t,{E:function(){return j},Eb:function(){return N},Fl:function(){return p},Gw:function(){return y},Nu:function(){return c},Qu:function(){return l},T4:function(){return x},VP:function(){return v},Wu:function(){return f},YD:function(){return h},ZL:function(){return r},d5:function(){return o},eI:function(){return i},rk:function(){return m},s3:function(){return a},sA:function(){return d},vu:function(){return g}});var s=n(5526);async function r(){let{data:e,error:t}=await s.OQ.from("clients").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function a(e){let{data:t,error:n}=await s.OQ.from("clients").select("*").eq("id",e).single();if(n)throw n;return t}async function i(e){let{data:t,error:n}=await s.OQ.from("clients").insert([e]).select().single();if(n)throw n;return t}async function l(e,t){let{data:n,error:r}=await s.OQ.from("clients").update(t).eq("id",e).select().single();if(r)throw r;return n}async function c(e){let{error:t}=await s.OQ.from("clients").delete().eq("id",e);if(t)throw t}async function d(){let{data:e,error:t}=await s.OQ.from("invoices").select("\n      *,\n      clients (\n        id,\n        name,\n        email,\n        company\n      )\n    ").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function o(e){let{data:t,error:n}=await s.OQ.from("invoices").select("\n      *,\n      clients (\n        id,\n        name,\n        email,\n        company\n      )\n    ").eq("id",e).single();if(n)throw n;return t}async function u(e,t){let{data:n,error:r}=await s.OQ.from("invoices").update(t).eq("id",e).select().single();if(r)throw r;return n}async function f(e){let{error:t}=await s.OQ.from("invoices").delete().eq("id",e);if(t)throw t}async function m(e,t){return u(e,{status:t})}async function x(){let{data:e,error:t}=await s.OQ.from("expenses").select("*").order("date",{ascending:!1});if(t)throw t;return e||[]}async function h(e){let{data:t,error:n}=await s.OQ.from("expenses").select("*").eq("id",e).single();if(n)throw n;return t}async function p(e){let{data:t,error:n}=await s.OQ.from("expenses").insert([e]).select().single();if(n)throw n;return t}async function j(e,t){let{data:n,error:r}=await s.OQ.from("expenses").update(t).eq("id",e).select().single();if(r)throw r;return n}async function g(e){let{error:t}=await s.OQ.from("expenses").delete().eq("id",e);if(t)throw t}async function y(){let{data:{user:e}}=await s.OQ.auth.getUser();if(!e)return null;let{data:t,error:n}=await s.OQ.from("settings").select("*").eq("user_id",e.id).single();if(n&&"PGRST116"!==n.code)throw n;return t||null}async function v(e){let{data:{user:t}}=await s.OQ.auth.getUser();if(!t)throw Error("User not authenticated");let{data:n,error:r}=await s.OQ.from("settings").upsert({...e,user_id:t.id}).select().single();if(r)throw r;return n}async function N(){try{let[e,t,n]=await Promise.all([s.OQ.from("invoices").select("\n        *,\n        clients (\n          id,\n          name,\n          email,\n          company\n        )\n      "),s.OQ.from("clients").select("*"),s.OQ.from("expenses").select("*")]),r=e.data||[],a=t.data||[],i=n.data||[],l=r.filter(e=>"Paid"===e.status).reduce((e,t)=>e+t.amount,0),c=i.reduce((e,t)=>e+t.amount,0),d=function(e){let t=new Map;return e.filter(e=>"Paid"===e.status).forEach(e=>{let n=new Date(e.created_at);"".concat(n.getFullYear(),"-").concat((n.getMonth()+1).toString().padStart(2,"0"));let s=n.toLocaleDateString("en-US",{year:"numeric",month:"short"});t.set(s,(t.get(s)||0)+e.amount)}),Array.from(t.entries()).map(e=>{let[t,n]=e;return{month:t,revenue:n}})}(r),o=function(e){let t=new Map;return e.forEach(e=>{let n=e.category||"Uncategorized";t.set(n,(t.get(n)||0)+e.amount)}),Array.from(t.entries()).map(e=>{let[t,n]=e;return{category:t,amount:n}})}(i),u=function(e){let t=new Map;return e.filter(e=>"Paid"===e.status).forEach(e=>{var n;let s=(null===(n=e.clients)||void 0===n?void 0:n.name)||"Unknown Client";t.set(s,(t.get(s)||0)+e.amount)}),Array.from(t.entries()).map(e=>{let[t,n]=e;return{client:t,revenue:n}}).sort((e,t)=>t.revenue-e.revenue).slice(0,10)}(r),f=function(e){let t=new Map;return e.forEach(e=>{let n=e.status||"Unknown";t.set(n,(t.get(n)||0)+1)}),Array.from(t.entries()).map(e=>{let[t,n]=e;return{status:t,count:n}})}(r);return{totalRevenue:l,totalExpenses:c,totalClients:a.length,totalInvoices:r.length,monthlyRevenue:d,expensesByCategory:o,clientRevenue:u,invoiceStatusDistribution:f}}catch(e){throw console.error("Error fetching analytics data:",e),e}}},93448:function(e,t,n){"use strict";n.d(t,{cn:function(){return a},p6:function(){return l},xG:function(){return i}});var s=n(61994),r=n(53335);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,s.W)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";if(!e)return"-";try{let n;let s="string"==typeof e?new Date(e):e;if(isNaN(s.getTime()))return"-";switch(t){case"short":n={year:"numeric",month:"short",day:"numeric"};break;case"long":n={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;default:n={year:"numeric",month:"long",day:"numeric"}}return new Intl.DateTimeFormat("en-US",n).format(s)}catch(e){return console.error("Error formatting date:",e),"-"}}}},function(e){e.O(0,[1524,9763,1906,6052,8496,9707,3376,2971,2117,1744],function(){return e(e.s=65092)}),_N_E=e.O()}]);