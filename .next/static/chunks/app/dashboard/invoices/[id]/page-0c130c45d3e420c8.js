(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6608],{50984:function(e,s,a){Promise.resolve().then(a.bind(a,28311))},32660:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});let n=(0,a(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},99376:function(e,s,a){"use strict";var n=a(35475);a.o(n,"useParams")&&a.d(s,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(s,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(s,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(s,{useSearchParams:function(){return n.useSearchParams}})},28311:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var n=a(57437),t=a(2265),i=a(99376),l=a(27648),c=a(12381),r=a(79820),d=a(69174),o=a(33804),x=a(15291),m=a(23340),h=a(5013),u=a(46674),j=a(4341),p=a(93448),v=a(32660),f=a(92735),N=a(15868),y=a(18930);function g(){var e,s,a,g,b,w,_,C,P;let D=(0,i.useParams)(),k=(0,i.useRouter)(),{toast:S}=(0,m.pm)(),I=(null==D?void 0:D.id)?String(D.id):"",{data:Z,isLoading:R,error:O}=(0,h.h8)(I),B=(0,h.sJ)(),E=(0,h.GE)(),{settings:F}=(0,j.r)(),[A,G]=(0,t.useState)(!1),[Q,Y]=(0,t.useState)(!1),[T,U]=(0,t.useState)(""),L=async()=>{if(confirm("Are you sure you want to delete this invoice? This action cannot be undone.")){G(!0);try{await B.mutateAsync(I),S({title:"Invoice Deleted",description:"Invoice has been deleted successfully."}),k.push("/dashboard/invoices")}catch(e){S({title:"Error",description:"Failed to delete invoice.",variant:"destructive"})}finally{G(!1)}}},z=async()=>{if(T){Y(!0);try{await E.mutateAsync({id:I,status:T}),S({title:"Status Updated",description:"Invoice status has been updated successfully."}),U("")}catch(e){S({title:"Error",description:"Failed to update invoice status.",variant:"destructive"})}finally{Y(!1)}}},H=async()=>{if(Z&&F)try{let e=Z.client||{id:Z.client_id,name:Z.client_name||"Unknown Client",email:Z.client_email||"",phone:Z.client_phone||"",address:Z.client_address||"",company:Z.client_company||""};await (0,u.D)(Z,e,F),S({title:"PDF Downloaded",description:"Invoice PDF has been downloaded successfully."})}catch(e){S({title:"Error",description:"Failed to download PDF.",variant:"destructive"})}};return R?(0,n.jsx)("div",{className:"container mx-auto py-6",children:(0,n.jsxs)("div",{className:"animate-pulse",children:[(0,n.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"h-64 bg-gray-200 rounded"}),(0,n.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})]})}):O||!Z?(0,n.jsx)("div",{className:"container mx-auto py-6",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-red-600",children:"Invoice Not Found"}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:"The invoice you're looking for doesn't exist."}),(0,n.jsx)(l.default,{href:"/dashboard/invoices",children:(0,n.jsx)(c.Button,{className:"mt-4",children:"Back to Invoices"})})]})}):(0,n.jsxs)("div",{className:"container mx-auto py-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(l.default,{href:"/dashboard/invoices",children:(0,n.jsxs)(c.Button,{variant:"outline",size:"sm",children:[(0,n.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"Back"]})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold",children:["Invoice #",Z.invoice_number||Z.id]}),(0,n.jsx)("p",{className:"text-gray-600",children:"View and manage invoice details"})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(c.Button,{onClick:H,variant:"outline",children:[(0,n.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),(0,n.jsx)(l.default,{href:"/dashboard/invoices/".concat(I,"/edit"),children:(0,n.jsxs)(c.Button,{variant:"outline",children:[(0,n.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Edit"]})}),(0,n.jsxs)(c.Button,{onClick:L,variant:"destructive",disabled:A,children:[(0,n.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),A?"Deleting...":"Delete"]})]})]}),(0,n.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,n.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)(r.ll,{children:"Invoice Status"}),(0,n.jsx)(d.C,{variant:(e=>{switch(e.toLowerCase()){case"paid":return"success";case"pending":return"warning";case"overdue":return"destructive";case"cancelled":return"secondary";default:return"default"}})(Z.status),children:Z.status})]})}),(0,n.jsx)(r.aY,{children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)(x.Ph,{value:T,onValueChange:U,children:[(0,n.jsx)(x.i4,{className:"w-[180px]",children:(0,n.jsx)(x.ki,{placeholder:"Change status"})}),(0,n.jsxs)(x.Bw,{children:[(0,n.jsx)(x.Ql,{value:"Draft",children:"Draft"}),(0,n.jsx)(x.Ql,{value:"Pending",children:"Pending"}),(0,n.jsx)(x.Ql,{value:"Paid",children:"Paid"}),(0,n.jsx)(x.Ql,{value:"Overdue",children:"Overdue"}),(0,n.jsx)(x.Ql,{value:"Cancelled",children:"Cancelled"})]})]}),(0,n.jsx)(c.Button,{onClick:z,disabled:!T||Q,children:Q?"Updating...":"Update Status"})]})})]}),(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsx)(r.ll,{children:"Invoice Information"})}),(0,n.jsxs)(r.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Invoice Number"}),(0,n.jsx)("p",{className:"font-semibold",children:Z.invoice_number||Z.id})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Amount"}),(0,n.jsx)("p",{className:"font-semibold text-lg",children:(0,p.xG)(Z.amount)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Issue Date"}),(0,n.jsx)("p",{className:"font-semibold",children:(0,p.p6)(Z.issue_date)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Due Date"}),(0,n.jsx)("p",{className:"font-semibold",children:(0,p.p6)(Z.due_date)})]})]}),Z.description&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Description"}),(0,n.jsx)("p",{className:"font-semibold",children:Z.description})]})]})]}),Z.items&&Z.items.length>0&&(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsx)(r.ll,{children:"Line Items"})}),(0,n.jsx)(r.aY,{children:(0,n.jsxs)(o.iA,{children:[(0,n.jsx)(o.xD,{children:(0,n.jsxs)(o.SC,{children:[(0,n.jsx)(o.ss,{children:"Description"}),(0,n.jsx)(o.ss,{className:"text-right",children:"Quantity"}),(0,n.jsx)(o.ss,{className:"text-right",children:"Rate"}),(0,n.jsx)(o.ss,{className:"text-right",children:"Amount"})]})}),(0,n.jsx)(o.RM,{children:Z.items.map((e,s)=>(0,n.jsxs)(o.SC,{children:[(0,n.jsx)(o.pj,{children:e.description}),(0,n.jsx)(o.pj,{className:"text-right",children:e.quantity}),(0,n.jsx)(o.pj,{className:"text-right",children:(0,p.xG)(e.rate)}),(0,n.jsx)(o.pj,{className:"text-right",children:(0,p.xG)(e.amount)})]},s))})]})})]})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsx)(r.ll,{children:"Client Details"})}),(0,n.jsxs)(r.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Name"}),(0,n.jsx)("p",{className:"font-semibold",children:(null===(e=Z.client)||void 0===e?void 0:e.name)||Z.client_name||"Unknown Client"})]}),((null===(s=Z.client)||void 0===s?void 0:s.email)||Z.client_email)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Email"}),(0,n.jsx)("p",{className:"font-semibold",children:(null===(a=Z.client)||void 0===a?void 0:a.email)||Z.client_email})]}),((null===(g=Z.client)||void 0===g?void 0:g.phone)||Z.client_phone)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Phone"}),(0,n.jsx)("p",{className:"font-semibold",children:(null===(b=Z.client)||void 0===b?void 0:b.phone)||Z.client_phone})]}),((null===(w=Z.client)||void 0===w?void 0:w.address)||Z.client_address)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Address"}),(0,n.jsx)("p",{className:"font-semibold whitespace-pre-line",children:(null===(_=Z.client)||void 0===_?void 0:_.address)||Z.client_address})]}),((null===(C=Z.client)||void 0===C?void 0:C.company)||Z.client_company)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Company"}),(0,n.jsx)("p",{className:"font-semibold",children:(null===(P=Z.client)||void 0===P?void 0:P.company)||Z.client_company})]})]})]}),(0,n.jsxs)(r.Zb,{children:[(0,n.jsx)(r.Ol,{children:(0,n.jsx)(r.ll,{children:"Payment Summary"})}),(0,n.jsxs)(r.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,n.jsx)("span",{className:"font-semibold",children:(0,p.xG)(Z.subtotal||Z.amount)})]}),Z.tax&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"Tax"}),(0,n.jsx)("span",{className:"font-semibold",children:(0,p.xG)(Z.tax)})]}),(0,n.jsx)("div",{className:"border-t pt-2",children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-lg font-semibold",children:"Total"}),(0,n.jsx)("span",{className:"text-lg font-semibold",children:(0,p.xG)(Z.amount)})]})})]})]})]})]})]})}},79820:function(e,s,a){"use strict";a.d(s,{Ol:function(){return c},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return r}});var n=a(57437),t=a(2265),i=a(93448);let l=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,n.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});l.displayName="Card";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,n.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...t})});c.displayName="CardHeader";let r=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,n.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});r.displayName="CardTitle";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,n.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...t})});d.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,n.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",a),...t})});o.displayName="CardContent",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,n.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a),...t})}).displayName="CardFooter"}},function(e){e.O(0,[2505,1524,2972,9763,1906,6052,8496,7973,1789,1166,3,2971,2117,1744],function(){return e(e.s=50984)}),_N_E=e.O()}]);