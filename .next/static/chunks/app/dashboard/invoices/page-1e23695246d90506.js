(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4490],{50521:function(e,n,s){Promise.resolve().then(s.bind(s,29005))},42208:function(e,n,s){"use strict";s.d(n,{Z:function(){return t}});let t=(0,s(39763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},99397:function(e,n,s){"use strict";s.d(n,{Z:function(){return t}});let t=(0,s(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73247:function(e,n,s){"use strict";s.d(n,{Z:function(){return t}});let t=(0,s(39763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},29005:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return _}});var t=s(57437),i=s(2265),a=s(27648),r=s(12381),l=s(40279),c=s(33804),d=s(15291),o=s(69174);function u(e){let{status:n}=e;return(0,t.jsx)(o.C,{variant:(e=>{switch(e.toLowerCase()){case"paid":return"paid";case"pending":return"pending";case"overdue":return"overdue";case"draft":return"draft";case"cancelled":return"cancelled";default:return"secondary"}})(n),children:n})}var h=s(5013),v=s(93448),x=s(99397),m=s(73247);let j=(0,s(39763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var f=s(42208),p=s(15868),y=s(92735),g=s(18930),N=s(46674),b=s(4341),w=s(3439);function _(){let{invoices:e,isLoading:n}=(0,h.qx)(),s=(0,h.sJ)();(0,h.GE)();let{settings:o}=(0,b.r)(),{clients:_}=(0,w.av)(),[C,k]=(0,i.useState)(""),[Z,L]=(0,i.useState)("all"),S=e.filter(e=>{var n;let s=(null===(n=e.client)||void 0===n?void 0:n.name)||e.client_name||"",t=(e.invoice_number||e.id||"").toLowerCase().includes(C.toLowerCase())||s.toLowerCase().includes(C.toLowerCase()),i="all"===Z||e.status.toLowerCase()===Z;return t&&i}),D=async e=>{confirm("Are you sure you want to delete this invoice?")&&await s.mutateAsync(e)},E=e=>{var n,s,t,i;let a=_.find(n=>n.id===e.client_id)||{id:e.client_id,name:(null===(n=e.clients)||void 0===n?void 0:n.name)||e.client_name||"Unknown Client",email:(null===(s=e.clients)||void 0===s?void 0:s.email)||"",phone:(null===(t=e.clients)||void 0===t?void 0:t.phone)||"",address:(null===(i=e.clients)||void 0===i?void 0:i.address)||""};o&&(0,N.D)(e,a,o)};return n?(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,t.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Invoices"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your invoices and billing"})]}),(0,t.jsx)(a.default,{href:"/dashboard/invoices/create",children:(0,t.jsxs)(r.Button,{children:[(0,t.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"New Invoice"]})})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(m.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-500"}),(0,t.jsx)(l.I,{placeholder:"Search invoices...",value:C,onChange:e=>k(e.target.value),className:"pl-8"})]}),(0,t.jsxs)(d.Ph,{value:Z,onValueChange:L,children:[(0,t.jsxs)(d.i4,{className:"w-[180px]",children:[(0,t.jsx)(j,{className:"mr-2 h-4 w-4"}),(0,t.jsx)(d.ki,{placeholder:"Filter by status"})]}),(0,t.jsxs)(d.Bw,{children:[(0,t.jsx)(d.Ql,{value:"all",children:"All Status"}),(0,t.jsx)(d.Ql,{value:"draft",children:"Draft"}),(0,t.jsx)(d.Ql,{value:"pending",children:"Pending"}),(0,t.jsx)(d.Ql,{value:"paid",children:"Paid"}),(0,t.jsx)(d.Ql,{value:"overdue",children:"Overdue"})]})]})]}),(0,t.jsx)("div",{className:"border rounded-lg",children:(0,t.jsxs)(c.iA,{children:[(0,t.jsx)(c.xD,{children:(0,t.jsxs)(c.SC,{children:[(0,t.jsx)(c.ss,{children:"Invoice #"}),(0,t.jsx)(c.ss,{children:"Client"}),(0,t.jsx)(c.ss,{children:"Amount"}),(0,t.jsx)(c.ss,{children:"Status"}),(0,t.jsx)(c.ss,{children:"Issue Date"}),(0,t.jsx)(c.ss,{children:"Due Date"}),(0,t.jsx)(c.ss,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(c.RM,{children:0===S.length?(0,t.jsx)(c.SC,{children:(0,t.jsx)(c.pj,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No invoices found"})}):S.map(e=>{var n;let s=(null===(n=e.client)||void 0===n?void 0:n.name)||e.client_name||"Unknown Client",i=e.invoice_number||e.id;return(0,t.jsxs)(c.SC,{children:[(0,t.jsx)(c.pj,{className:"font-medium",children:(0,t.jsx)(a.default,{href:"/dashboard/invoices/".concat(e.id),className:"text-blue-600 hover:underline",children:i})}),(0,t.jsx)(c.pj,{children:s}),(0,t.jsx)(c.pj,{children:(0,v.xG)(e.amount)}),(0,t.jsx)(c.pj,{children:(0,t.jsx)(u,{status:e.status})}),(0,t.jsx)(c.pj,{children:(0,v.p6)(e.issue_date)}),(0,t.jsx)(c.pj,{children:(0,v.p6)(e.due_date)}),(0,t.jsx)(c.pj,{children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(a.default,{href:"/dashboard/invoices/".concat(e.id),children:(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(f.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(a.default,{href:"/dashboard/invoices/".concat(e.id,"/edit"),children:(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>E(e),children:(0,t.jsx)(y.Z,{className:"h-4 w-4"})}),(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>D(e.id),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(g.Z,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})}},40279:function(e,n,s){"use strict";s.d(n,{I:function(){return r}});var t=s(57437),i=s(2265),a=s(93448);let r=i.forwardRef((e,n)=>{let{className:s,type:i,...r}=e;return(0,t.jsx)("input",{type:i,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...r})});r.displayName="Input"},3439:function(e,n,s){"use strict";s.d(n,{Ln:function(){return o},av:function(){return d}});var t=s(29827),i=s(11713),a=s(21770),r=s(96629),l=s(23340),c=s(97160);function d(){var e;let{toast:n}=(0,l.pm)();(0,t.NL)();let s=(0,c.o)(e=>e.setClients),a=(0,i.a)({queryKey:["clients"],queryFn:async()=>{let e=(await (0,r.ZL)()).map(e=>{var n,s,t;return{id:e.id,name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",company:e.company||"",contact_name:e.contact_name||"",payment_terms:e.payment_terms||"",status:e.status||"active",created_at:e.created_at||"",updated_at:e.updated_at||"",total_invoices:null!==(n=e.total_invoices)&&void 0!==n?n:0,total_revenue:null!==(s=e.total_revenue)&&void 0!==s?s:0,total_amount:null!==(t=e.total_amount)&&void 0!==t?t:0}});return s(e),e}});return{clients:null!==(e=a.data)&&void 0!==e?e:[],isLoading:a.isLoading,error:a.error,refetch:a.refetch}}function o(){let{toast:e}=(0,l.pm)(),n=(0,t.NL)(),s=(0,c.o)(e=>e.removeClient);return(0,a.D)({mutationFn:r.Nu,onSuccess:(t,i)=>{s(i),n.invalidateQueries({queryKey:["clients"]}),e({title:"Success",description:"Client deleted successfully"})},onError:n=>{e({title:"Error",description:n.message||"Failed to delete client",variant:"destructive"})}})}}},function(e){e.O(0,[2505,1524,2972,9763,1906,6052,8496,7973,1789,1166,3,2971,2117,1744],function(){return e(e.s=50521)}),_N_E=e.O()}]);