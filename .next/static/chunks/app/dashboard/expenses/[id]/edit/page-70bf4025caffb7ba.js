(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8550],{70960:function(e,s,t){Promise.resolve().then(t.bind(t,64063))},71621:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(39763).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]])},64063:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(57437),n=t(99376),i=t(27648),r=t(71621),l=t(32660),d=t(79820),c=t(12381),o=t(23340),u=t(72574),h=t(1071);function x(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),{toast:t}=(0,o.pm)(),x=(null==e?void 0:e.id)?String(e.id):"",{data:m,isLoading:p,error:j}=(0,h.Nb)(x),f=(0,h.Fg)(),b=async e=>{await f.mutateAsync({id:x,data:e}),s.push("/dashboard/expenses")};return p?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"Loading expense..."})}):j||!m?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"h-5 w-5"}),"Expense Not Found"]})}),(0,a.jsxs)(d.aY,{children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"The expense you're looking for doesn't exist or has been deleted."}),(0,a.jsx)(c.Button,{asChild:!0,children:(0,a.jsxs)(i.default,{href:"/dashboard/expenses",children:[(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Back to Expenses"]})})]})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(c.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)(i.default,{href:"/dashboard/expenses",children:[(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Back to Expenses"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Expense"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Update expense details"})]})]}),(0,a.jsx)("div",{className:"max-w-2xl",children:(0,a.jsx)(u.V,{expense:m,onSubmit:b,onCancel:()=>{s.push("/dashboard/expenses")},isLoading:f.isPending})})]})}},72574:function(e,s,t){"use strict";t.d(s,{V:function(){return u}});var a=t(57437),n=t(2265),i=t(79820),r=t(12381),l=t(40279),d=t(50935),c=t(23340),o=t(5526);function u(e){let{expense:s,onSubmit:t,onCancel:u,isLoading:h}=e,{toast:x}=(0,c.pm)(),[m,p]=(0,n.useState)([]),[j,f]=(0,n.useState)(!0),[b,g]=(0,n.useState)({description:(null==s?void 0:s.description)||"",amount:(null==s?void 0:s.amount)||0,category:(null==s?void 0:s.category)||"",date:(null==s?void 0:s.date)||new Date().toISOString().split("T")[0],payment_method:(null==s?void 0:s.payment_method)||"Cash",is_reimbursable:(null==s?void 0:s.is_reimbursable)||!1}),[v,y]=(0,n.useState)({});(0,n.useEffect)(()=>{C()},[]);let C=async()=>{try{let{data:e,error:s}=await o.OQ.from("expense_categories").select("id, name").order("name");if(s)throw s;if(e&&0!==e.length)p(e);else{let{data:e,error:s}=await o.OQ.from("expense_categories").insert([{name:"Office Supplies"},{name:"Travel"},{name:"Meals"},{name:"Software"},{name:"Marketing"},{name:"Utilities"},{name:"Other"}]).select();if(s)throw s;p(e||[])}}catch(e){console.error("Error loading categories:",e),p([{id:"1",name:"Office Supplies"},{id:"2",name:"Travel"},{id:"3",name:"Meals"},{id:"4",name:"Software"},{id:"5",name:"Marketing"},{id:"6",name:"Utilities"},{id:"7",name:"Other"}])}finally{f(!1)}},N=()=>{let e={};return b.description.trim()||(e.description="Description is required"),(!b.amount||b.amount<=0)&&(e.amount="Amount must be greater than 0"),b.category||(e.category="Category is required"),b.date||(e.date="Date is required"),y(e),0===Object.keys(e).length},k=e=>s=>{let t=s.target.value;"amount"===e?t=parseFloat(s.target.value)||0:"is_reimbursable"===e&&(t=s.target.checked),g(s=>({...s,[e]:t})),v[e]&&y(s=>{let t={...s};return delete t[e],t})},w=async e=>{if(e.preventDefault(),N())try{await t(b)}catch(e){x({title:"Error",description:"Failed to save expense. Please try again.",variant:"destructive"})}};return j?(0,a.jsx)("div",{className:"p-8 text-center",children:"Loading categories..."}):(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{children:s?"Edit Expense":"Create New Expense"})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,a.jsxs)(d.xJ,{children:[(0,a.jsx)(d.lX,{children:"Description *"}),(0,a.jsx)(l.I,{value:b.description,onChange:k("description"),placeholder:"What was this expense for?",disabled:h}),(0,a.jsx)(d.zG,{children:v.description})]}),(0,a.jsxs)(d.xJ,{children:[(0,a.jsx)(d.lX,{children:"Amount *"}),(0,a.jsx)(l.I,{type:"number",step:"0.01",value:b.amount,onChange:k("amount"),placeholder:"0.00",disabled:h}),(0,a.jsx)(d.zG,{children:v.amount})]}),(0,a.jsxs)(d.xJ,{children:[(0,a.jsx)(d.lX,{children:"Category *"}),(0,a.jsxs)("select",{value:b.category,onChange:k("category"),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:h,children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),m.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,a.jsx)(d.zG,{children:v.category})]}),(0,a.jsxs)(d.xJ,{children:[(0,a.jsx)(d.lX,{children:"Date *"}),(0,a.jsx)(l.I,{type:"date",value:b.date,onChange:k("date"),disabled:h}),(0,a.jsx)(d.zG,{children:v.date})]}),(0,a.jsxs)(d.xJ,{children:[(0,a.jsx)(d.lX,{children:"Payment Method"}),(0,a.jsxs)("select",{value:b.payment_method,onChange:k("payment_method"),className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:h,children:[(0,a.jsx)("option",{value:"Cash",children:"Cash"}),(0,a.jsx)("option",{value:"Credit Card",children:"Credit Card"}),(0,a.jsx)("option",{value:"Debit Card",children:"Debit Card"}),(0,a.jsx)("option",{value:"Bank Transfer",children:"Bank Transfer"}),(0,a.jsx)("option",{value:"Check",children:"Check"}),(0,a.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,a.jsx)(d.xJ,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"is_reimbursable",checked:b.is_reimbursable,onChange:k("is_reimbursable"),disabled:h,className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,a.jsx)(d.lX,{htmlFor:"is_reimbursable",className:"text-sm font-medium",children:"This is a reimbursable expense"})]})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[u&&(0,a.jsx)(r.Button,{type:"button",variant:"outline",onClick:u,disabled:h,children:"Cancel"}),(0,a.jsx)(r.Button,{type:"submit",disabled:h,children:h?s?"Updating...":"Creating...":s?"Update Expense":"Create Expense"})]})]})})]})}}},function(e){e.O(0,[1524,2972,9763,1906,880,5891,1071,2971,2117,1744],function(){return e(e.s=70960)}),_N_E=e.O()}]);