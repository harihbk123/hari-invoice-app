"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{15291:function(e,t,n){n.d(t,{Bw:function(){return x},Ph:function(){return d},Ql:function(){return v},i4:function(){return m},ki:function(){return u}});var a=n(57437),i=n(2265),o=n(60520),r=n(40875),s=n(22135),l=n(30401),c=n(93448);let d=o.fC;o.ZA;let u=o.B4,m=i.forwardRef((e,t)=>{let{className:n,children:i,...s}=e;return(0,a.jsxs)(o.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...s,children:[i,(0,a.jsx)(o.JO,{asChild:!0,children:(0,a.jsx)(r.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=o.xz.displayName;let f=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,a.jsx)(o.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",n),...i,children:(0,a.jsx)(s.Z,{className:"h-4 w-4"})})});f.displayName=o.u_.displayName;let p=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,a.jsx)(o.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",n),...i,children:(0,a.jsx)(r.Z,{className:"h-4 w-4"})})});p.displayName=o.$G.displayName;let x=i.forwardRef((e,t)=>{let{className:n,children:i,position:r="popper",...s}=e;return(0,a.jsx)(o.h_,{children:(0,a.jsxs)(o.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:r,...s,children:[(0,a.jsx)(f,{}),(0,a.jsx)(o.l_,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,a.jsx)(p,{})]})})});x.displayName=o.VY.displayName,i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,a.jsx)(o.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...i})}).displayName=o.__.displayName;let v=i.forwardRef((e,t)=>{let{className:n,children:i,...r}=e;return(0,a.jsxs)(o.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(o.wU,{children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(o.eT,{children:i})]})});v.displayName=o.ck.displayName,i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,a.jsx)(o.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",n),...i})}).displayName=o.Z0.displayName},5013:function(e,t,n){n.d(t,{GE:function(){return m},h8:function(){return d},qx:function(){return c},sJ:function(){return u}});var a=n(29827),i=n(11713),o=n(21770),r=n(96629),s=n(23340),l=n(97160);function c(){var e;let{toast:t}=(0,s.pm)();(0,a.NL)();let n=(0,l.o)(e=>e.setInvoices),o=(0,i.a)({queryKey:["invoices"],queryFn:async()=>{let e=(await (0,r.sA)()).map(e=>{var t,n,a;return{id:e.id,invoice_number:e.invoice_number||"",client_id:e.client_id||"",amount:null!==(t=e.amount)&&void 0!==t?t:0,status:e.status||"Draft",issue_date:e.issue_date||"",due_date:e.due_date||"",description:e.description||"",subtotal:null!==(n=e.subtotal)&&void 0!==n?n:0,tax:null!==(a=e.tax)&&void 0!==a?a:0,items:e.items||[],client:e.client||void 0,client_name:e.client_name||"",client_email:e.client_email||"",client_phone:e.client_phone||"",client_address:e.client_address||"",client_company:e.client_company||"",created_at:e.created_at||"",updated_at:e.updated_at||""}}).map(e=>{var t,n,a;return{...e,client_id:e.client_id||null,client_name:e.client_name||"",amount:null!==(t=e.amount)&&void 0!==t?t:0,subtotal:null!==(n=e.subtotal)&&void 0!==n?n:0,tax:null!==(a=e.tax)&&void 0!==a?a:0,date_issued:e.issue_date||"",due_date:e.due_date||"",status:e.status||null,items:e.items||[],created_at:e.created_at||null,updated_at:e.updated_at||null}});return n(e),e}});return{invoices:null!==(e=o.data)&&void 0!==e?e:[],isLoading:o.isLoading,error:o.error,refetch:o.refetch}}function d(e){return(0,i.a)({queryKey:["invoice",e],queryFn:()=>(0,r.d5)(e),enabled:!!e})}function u(){let{toast:e}=(0,s.pm)(),t=(0,a.NL)(),n=(0,l.o)(e=>e.removeInvoice);return(0,o.D)({mutationFn:r.Wu,onSuccess:(a,i)=>{n(i),t.invalidateQueries({queryKey:["invoices"]}),t.invalidateQueries({queryKey:["clients"]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:"Invoice deleted successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to delete invoice",variant:"destructive"})}})}function m(){let{toast:e}=(0,s.pm)(),t=(0,a.NL)();return(0,o.D)({mutationFn:e=>{let{id:t,status:n}=e;return(0,r.rk)(t,n)},onSuccess:n=>{t.invalidateQueries({queryKey:["invoices"]}),t.invalidateQueries({queryKey:["invoice",n.id]}),t.invalidateQueries({queryKey:["balance"]}),e({title:"Success",description:"Invoice status changed to ".concat(n.status)})},onError:t=>{e({title:"Error",description:t.message||"Failed to change invoice status",variant:"destructive"})}})}},46674:function(e,t,n){n.d(t,{D:function(){return o}});var a=n(53375);n(46994);var i=n(93448);function o(e,t,n){var o,r,s,l,c;let d=new a.ZP({unit:"pt",format:"a4",putOnlyUsedFonts:!0});d.setFont("helvetica"),d.setFontSize(24),d.setFont("helvetica","bold"),d.text("INVOICE",40,60),d.setFontSize(10),d.setFont("helvetica","normal"),d.text("Invoice: ".concat(e.id),400,40),d.text("Date: ".concat((0,i.p6)(e.issue_date)),400,55),d.text("Due: ".concat((0,i.p6)(e.due_date)),400,70),d.setFontSize(12),d.setFont("helvetica","bold"),d.text("FROM:",40,100);let u=120;d.setFontSize(10),d.setFont("helvetica","normal"),d.text(n.profile_name||"Your Company",40,u),u+=15,n.profile_address&&(d.setFontSize(9),d.splitTextToSize(n.profile_address,200).forEach(e=>{d.text(e,40,u),u+=12})),d.setFontSize(9),n.profile_gstin&&(d.text("GSTIN: ".concat(n.profile_gstin),40,u),u+=12),n.profile_phone&&(d.text("Phone: ".concat(n.profile_phone),40,u),u+=12),n.profile_email&&(d.text("Email: ".concat(n.profile_email),40,u),u+=12),d.setFontSize(12),d.setFont("helvetica","bold"),d.text("BILLED TO:",320,100);let m=120;d.setFontSize(10),d.setFont("helvetica","normal"),d.text(t.name,320,m),m+=15,t.address&&(d.setFontSize(9),d.splitTextToSize(t.address,200).forEach(e=>{d.text(e,320,m),m+=12})),t.email&&(d.text("Email: ".concat(t.email),320,m),m+=12),t.phone&&(d.text("Phone: ".concat(t.phone),320,m),m+=12);let f=Math.max(u,m)+30,p=(null!==(c=e.items)&&void 0!==c?c:[]).map(e=>{var t,n,a;let i=parseFloat((null===(t=e.rate)||void 0===t?void 0:t.toString())||"0"),o=parseFloat((null===(n=e.amount)||void 0===n?void 0:n.toString())||"0"),r=parseInt((null===(a=e.quantity)||void 0===a?void 0:a.toString())||"1");return[e.description||"",r.toString(),"INR ".concat(i.toFixed(2)),"INR ".concat(o.toFixed(2))]});d.autoTable({head:[["Description","Qty","Unit Cost","Amount"]],body:p,startY:f,styles:{fontSize:9,cellPadding:6,overflow:"linebreak"},headStyles:{fillColor:[52,73,94],textColor:[255,255,255],fontSize:10,fontStyle:"bold"},columnStyles:{0:{cellWidth:250,halign:"left"},1:{cellWidth:50,halign:"center"},2:{cellWidth:90,halign:"right"},3:{cellWidth:90,halign:"right"}},margin:{left:40,right:40}});let x=d.lastAutoTable.finalY+30;d.setFont("helvetica","normal"),d.setFontSize(10);let v=parseFloat((null===(o=e.subtotal)||void 0===o?void 0:o.toString())||"0"),h=parseFloat((null===(r=e.tax)||void 0===r?void 0:r.toString())||"0"),y=parseFloat((null===(s=e.amount)||void 0===s?void 0:s.toString())||"0"),_=parseFloat((null===(l=n.tax_rate)||void 0===l?void 0:l.toString())||"0");d.text("Subtotal:",380,x),d.text("INR ".concat(v.toFixed(2)),520,x,{align:"right"}),d.text("Tax (".concat(_,"%):"),380,x+20),d.text("INR ".concat(h.toFixed(2)),520,x+20,{align:"right"}),d.setFont("helvetica","bold"),d.text("TOTAL:",380,x+55),d.text("INR ".concat(y.toFixed(2)),520,x+55,{align:"right"});let g=x+80;d.setFont("helvetica","bold"),d.setFontSize(11),d.text("BANK ACCOUNT DETAILS",40,g),d.setFont("helvetica","normal"),d.setFontSize(9);let b=g+20;d.text("Account Name:",40,b),d.text(n.bank_account_name||n.profile_name||"Your Name",150,b),b+=15,d.text("Account Type:",40,b),d.text(n.account_type||"Current Account",150,b),b+=15,d.text("Account Number:",40,b),d.text(n.bank_account||"",150,b),b+=15,d.text("Bank Name:",40,b),d.text(n.bank_name||"",150,b),b+=15,d.text("Branch Name:",40,b),d.text(n.bank_branch||"",150,b),b+=15,d.text("IFSC Code:",40,b),d.text(n.bank_ifsc||"",150,b),b+=15,d.text("SWIFT Code:",40,b),d.text(n.bank_swift||"",150,b),d.setFontSize(8),d.setFont("helvetica","italic"),d.text("Thank you for your business!",40,750);let F=e.id.replace(/[^a-zA-Z0-9-_]/g,"_");d.save("Invoice_".concat(F,".pdf"))}},4341:function(e,t,n){n.d(t,{Q:function(){return d},r:function(){return c}});var a=n(11713),i=n(29827),o=n(21770),r=n(96629),s=n(23340),l=n(97160);function c(){let e=(0,l.o)(e=>e.setSettings),t=(0,a.a)({queryKey:["settings"],queryFn:async()=>{let t=await (0,r.Gw)();return t&&e(t),t}});return{settings:t.data,isLoading:t.isLoading,error:t.error,refetch:t.refetch}}function d(){let{toast:e}=(0,s.pm)(),t=(0,i.NL)(),n=(0,l.o)(e=>e.setSettings);return(0,o.D)({mutationFn:r.VP,onSuccess:a=>{a&&n(a),t.invalidateQueries({queryKey:["settings"]}),e({title:"Success",description:"Settings updated successfully"})},onError:t=>{e({title:"Error",description:t.message||"Failed to update settings",variant:"destructive"})}})}}}]);