(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1166],{25282:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=25282,e.exports=t},69174:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var r=n(57437);n(2265);var a=n(90535),i=n(93448);let s=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-500/80",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-500/80",draft:"border-transparent bg-gray-500 text-white hover:bg-gray-500/80",pending:"border-transparent bg-blue-500 text-white hover:bg-blue-500/80",paid:"border-transparent bg-green-500 text-white hover:bg-green-500/80",overdue:"border-transparent bg-red-500 text-white hover:bg-red-500/80",cancelled:"border-transparent bg-gray-400 text-white hover:bg-gray-400/80"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:n,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)(s({variant:n}),t),...a})}},12381:function(e,t,n){"use strict";n.d(t,{Button:function(){return l}});var r=n(57437),a=n(2265),i=n(37053),s=n(90535),o=n(93448);let c=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:n,variant:a,size:s,asChild:l=!1,...u}=e,d=l?i.g7:"button";return(0,r.jsx)(d,{className:(0,o.cn)(c({variant:a,size:s,className:n})),ref:t,...u})});l.displayName="Button"},33804:function(e,t,n){"use strict";n.d(t,{RM:function(){return c},SC:function(){return l},iA:function(){return s},pj:function(){return d},ss:function(){return u},xD:function(){return o}});var r=n(57437),a=n(2265),i=n(93448);let s=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",n),...a})})});s.displayName="Table";let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",n),...a})});o.displayName="TableHeader";let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",n),...a})});c.displayName="TableBody",a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...a})}).displayName="TableFooter";let l=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...a})});l.displayName="TableRow";let u=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...a})});u.displayName="TableHead";let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...a})});d.displayName="TableCell",a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",n),...a})}).displayName="TableCaption"},23340:function(e,t,n){"use strict";n.d(t,{pm:function(){return f}});var r=n(2265);let a=0,i=new Map,s=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?s(n):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function u(e){l=o(l,e),c.forEach(e=>{e(l)})}function d(e){let{...t}=e,n=(a=(a+1)%Number.MAX_VALUE).toString(),r=()=>u({type:"DISMISS_TOAST",toastId:n});return u({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||r()}}}),{id:n,dismiss:r,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function f(){let[e,t]=r.useState(l);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},5526:function(e,t,n){"use strict";n.d(t,{OQ:function(){return i},TW:function(){return o},zB:function(){return s}});var r=n(21388),a=n(40257);let i=(0,r.createBrowserClient)(a.env.NEXT_PUBLIC_SUPABASE_URL,a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY),s=async(e,t)=>{let{data:n,error:r}=await i.auth.signInWithPassword({email:e,password:t});return{data:n,error:r}},o={async getClients(){let{data:e,error:t}=await i.from("clients").select("*").order("created_at",{ascending:!1});return{data:e,error:t}},async createClient(e){let{data:t,error:n}=await i.from("clients").insert([e]).select().single();return{data:t,error:n}},async updateClient(e,t){let{data:n,error:r}=await i.from("clients").update(t).eq("id",e).select().single();return{data:n,error:r}},async deleteClient(e){let{error:t}=await i.from("clients").delete().eq("id",e);return{error:t}},async getInvoices(){let{data:e,error:t}=await i.from("invoices").select("*, clients(*)").order("created_at",{ascending:!1});return{data:e,error:t}},async createInvoice(e){let{data:t,error:n}=await i.from("invoices").insert([e]).select().single();return{data:t,error:n}},async updateInvoice(e,t){let{data:n,error:r}=await i.from("invoices").update(t).eq("id",e).select().single();return{data:n,error:r}},async deleteInvoice(e){let{error:t}=await i.from("invoices").delete().eq("id",e);return{error:t}},async getExpenses(){let{data:e,error:t}=await i.from("expenses").select("*").order("date",{ascending:!1});return{data:e,error:t}},async createExpense(e){let{data:t,error:n}=await i.from("expenses").insert([e]).select().single();return{data:t,error:n}},async updateExpense(e,t){let{data:n,error:r}=await i.from("expenses").update(t).eq("id",e).select().single();return{data:n,error:r}},async deleteExpense(e){let{error:t}=await i.from("expenses").delete().eq("id",e);return{error:t}},async getExpenseCategories(){let{data:e,error:t}=await i.from("expense_categories").select("*").order("name");return{data:e,error:t}},async getSettings(e){let{data:t,error:n}=await i.from("settings").select("*").eq("user_id",e).single();return{data:t,error:n}},async updateSettings(e){let{data:t,error:n}=await i.from("settings").upsert(e).select().single();return{data:t,error:n}},async getBalanceSummary(){let{data:e,error:t}=await i.from("balance_summary").select("*").single();return{data:e,error:t}}}},96629:function(e,t,n){"use strict";n.d(t,{E:function(){return w},Eb:function(){return x},Fl:function(){return y},Gw:function(){return h},Nu:function(){return c},Qu:function(){return o},T4:function(){return m},VP:function(){return b},Wu:function(){return f},YD:function(){return p},ZL:function(){return a},d5:function(){return u},eI:function(){return s},rk:function(){return g},s3:function(){return i},sA:function(){return l},vu:function(){return v}});var r=n(5526);async function a(){let{data:e,error:t}=await r.OQ.from("clients").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function i(e){let{data:t,error:n}=await r.OQ.from("clients").select("*").eq("id",e).single();if(n)throw n;return t}async function s(e){let{data:t,error:n}=await r.OQ.from("clients").insert([e]).select().single();if(n)throw n;return t}async function o(e,t){let{data:n,error:a}=await r.OQ.from("clients").update(t).eq("id",e).select().single();if(a)throw a;return n}async function c(e){let{error:t}=await r.OQ.from("clients").delete().eq("id",e);if(t)throw t}async function l(){let{data:e,error:t}=await r.OQ.from("invoices").select("\n      *,\n      clients (\n        id,\n        name,\n        email,\n        company\n      )\n    ").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function u(e){let{data:t,error:n}=await r.OQ.from("invoices").select("\n      *,\n      clients (\n        id,\n        name,\n        email,\n        company\n      )\n    ").eq("id",e).single();if(n)throw n;return t}async function d(e,t){let{data:n,error:a}=await r.OQ.from("invoices").update(t).eq("id",e).select().single();if(a)throw a;return n}async function f(e){let{error:t}=await r.OQ.from("invoices").delete().eq("id",e);if(t)throw t}async function g(e,t){return d(e,{status:t})}async function m(){let{data:e,error:t}=await r.OQ.from("expenses").select("*").order("date",{ascending:!1});if(t)throw t;return e||[]}async function p(e){let{data:t,error:n}=await r.OQ.from("expenses").select("*").eq("id",e).single();if(n)throw n;return t}async function y(e){let{data:t,error:n}=await r.OQ.from("expenses").insert([e]).select().single();if(n)throw n;return t}async function w(e,t){let{data:n,error:a}=await r.OQ.from("expenses").update(t).eq("id",e).select().single();if(a)throw a;return n}async function v(e){let{error:t}=await r.OQ.from("expenses").delete().eq("id",e);if(t)throw t}async function h(){let{data:{user:e}}=await r.OQ.auth.getUser();if(!e)return null;let{data:t,error:n}=await r.OQ.from("settings").select("*").eq("user_id",e.id).single();if(n&&"PGRST116"!==n.code)throw n;return t||null}async function b(e){let{data:{user:t}}=await r.OQ.auth.getUser();if(!t)throw Error("User not authenticated");let{data:n,error:a}=await r.OQ.from("settings").upsert({...e,user_id:t.id}).select().single();if(a)throw a;return n}async function x(){try{let[e,t,n]=await Promise.all([r.OQ.from("invoices").select("\n        *,\n        clients (\n          id,\n          name,\n          email,\n          company\n        )\n      "),r.OQ.from("clients").select("*"),r.OQ.from("expenses").select("*")]),a=e.data||[],i=t.data||[],s=n.data||[],o=a.filter(e=>"Paid"===e.status).reduce((e,t)=>e+t.amount,0),c=s.reduce((e,t)=>e+t.amount,0),l=function(e){let t=new Map;return e.filter(e=>"Paid"===e.status).forEach(e=>{let n=new Date(e.created_at);"".concat(n.getFullYear(),"-").concat((n.getMonth()+1).toString().padStart(2,"0"));let r=n.toLocaleDateString("en-US",{year:"numeric",month:"short"});t.set(r,(t.get(r)||0)+e.amount)}),Array.from(t.entries()).map(e=>{let[t,n]=e;return{month:t,revenue:n}})}(a),u=function(e){let t=new Map;return e.forEach(e=>{let n=e.category||"Uncategorized";t.set(n,(t.get(n)||0)+e.amount)}),Array.from(t.entries()).map(e=>{let[t,n]=e;return{category:t,amount:n}})}(s),d=function(e){let t=new Map;return e.filter(e=>"Paid"===e.status).forEach(e=>{var n;let r=(null===(n=e.clients)||void 0===n?void 0:n.name)||"Unknown Client";t.set(r,(t.get(r)||0)+e.amount)}),Array.from(t.entries()).map(e=>{let[t,n]=e;return{client:t,revenue:n}}).sort((e,t)=>t.revenue-e.revenue).slice(0,10)}(a),f=function(e){let t=new Map;return e.forEach(e=>{let n=e.status||"Unknown";t.set(n,(t.get(n)||0)+1)}),Array.from(t.entries()).map(e=>{let[t,n]=e;return{status:t,count:n}})}(a);return{totalRevenue:o,totalExpenses:c,totalClients:i.length,totalInvoices:a.length,monthlyRevenue:l,expensesByCategory:u,clientRevenue:d,invoiceStatusDistribution:f}}catch(e){throw console.error("Error fetching analytics data:",e),e}}},93448:function(e,t,n){"use strict";n.d(t,{cn:function(){return i},p6:function(){return o},xG:function(){return s}});var r=n(61994),a=n(53335);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.m6)((0,r.W)(t))}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";if(!e)return"-";try{let n;let r="string"==typeof e?new Date(e):e;if(isNaN(r.getTime()))return"-";switch(t){case"short":n={year:"numeric",month:"short",day:"numeric"};break;case"long":n={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;default:n={year:"numeric",month:"long",day:"numeric"}}return new Intl.DateTimeFormat("en-US",n).format(r)}catch(e){return console.error("Error formatting date:",e),"-"}}},97160:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var r=n(59625),a=n(5526);let i=(0,r.Ue)((e,t)=>({user:null,clients:[],invoices:[],expenses:[],expenseCategories:[],settings:null,balanceSummary:null,isLoading:!1,isLoadingClients:!1,isLoadingInvoices:!1,isLoadingExpenses:!1,setUser:t=>e({user:t}),setLoading:t=>e({isLoading:t}),setClients:t=>e({clients:t}),setInvoices:t=>e({invoices:t}),setExpenses:t=>e({expenses:t}),setSettings:t=>e({settings:t}),setBalanceSummary:t=>e({balanceSummary:t}),loadInitialData:async()=>{e({isLoading:!0});try{let[n,r,i,s,o]=await Promise.all([a.TW.getClients(),a.TW.getInvoices(),a.TW.getExpenses(),a.TW.getExpenseCategories(),a.TW.getBalanceSummary()]);n.data&&e({clients:n.data}),r.data&&e({invoices:r.data}),i.data&&e({expenses:i.data}),s.data&&e({expenseCategories:s.data}),o.data&&e({balanceSummary:o.data});let{user:c}=t();if(c){let t=await a.TW.getSettings(c.id);t.data&&e({settings:t.data})}}catch(e){console.error("Error loading initial data:",e)}finally{e({isLoading:!1})}},addClient:t=>e(e=>({clients:[t,...e.clients]})),updateClient:(t,n)=>e(e=>({clients:e.clients.map(e=>e.id===t?{...e,...n}:e)})),removeClient:t=>e(e=>({clients:e.clients.filter(e=>e.id!==t)})),addInvoice:t=>e(e=>({invoices:[t,...e.invoices]})),updateInvoice:(t,n)=>e(e=>({invoices:e.invoices.map(e=>e.id===t?{...e,...n}:e)})),removeInvoice:t=>e(e=>({invoices:e.invoices.filter(e=>e.id!==t)})),addExpense:t=>e(e=>({expenses:[t,...e.expenses]})),updateExpense:(t,n)=>e(e=>({expenses:e.expenses.map(e=>e.id===t?{...e,...n}:e)})),removeExpense:t=>e(e=>({expenses:e.expenses.filter(e=>e.id!==t)})),updateSettings:t=>e(e=>({settings:e.settings?{...e.settings,...t}:null})),updateBalanceSummary:t=>e(e=>({balanceSummary:e.balanceSummary?{...e.balanceSummary,...t}:null})),getTotalEarnings:()=>{let{invoices:e}=t();return e.filter(e=>"Paid"===e.status).reduce((e,t)=>e+t.amount,0)},getTotalExpenses:()=>{let{expenses:e}=t();return e.reduce((e,t)=>e+t.amount,0)},getCurrentBalance:()=>{let{getTotalEarnings:e,getTotalExpenses:n}=t();return e()-n()},getRecentInvoices:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,{invoices:n}=t();return n.slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,e)},getRecentExpenses:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,{expenses:n}=t();return n.slice().sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,e)},getOverdueInvoices:()=>{let{invoices:e}=t(),n=new Date;return e.filter(e=>"Pending"===e.status&&new Date(e.due_date)<n)},reset:()=>e({user:null,clients:[],invoices:[],expenses:[],expenseCategories:[],settings:null,balanceSummary:null,isLoading:!1,isLoadingClients:!1,isLoadingInvoices:!1,isLoadingExpenses:!1})}))}}]);